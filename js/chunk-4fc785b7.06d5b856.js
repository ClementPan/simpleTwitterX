(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4fc785b7"],{"369c":function(e,t,r){"use strict";r.r(t);var n=r("1da1"),s=(r("96cf"),r("c8e4")),a=r("cfa6"),o=r("5530"),i=(r("d81d"),r("4cce")),c=r("2708"),l=r("2fa3"),u=r("2f62"),f={name:"UserFollowersList",mixins:[c.a],props:{Followers:{type:Array,required:!0}},data:function(){return{followers:[],isProcessing:!1}},computed:Object(o.a)({},Object(u.b)(["currentUser"])),watch:{Followers:function(e){this.fetchfollowers(e)}},created:function(){this.fetchfollowers()},methods:{fetchfollowers:function(){this.followers=this.Followers},addFollowing:function(s){var a=this;return Object(n.a)(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.isProcessing=!0,t=s.followerId,e.next=5,i.a.followUser(t);case 5:if(r=e.sent,"success"!==(r=r.data).status)throw new Error(r.message);e.next=9;break;case 9:a.renderAfterFollowToggle(s),r=a.$route.params.id,a.$socket.emit("follow",{userId:r,currentUserId:a.currentUser.id}),l.a.fire({icon:"success",title:"追蹤成功！"}),a.isProcessing=!1,e.next=21;break;case 16:e.prev=16,e.t0=e.catch(0),a.isProcessing=!1,l.a.fire({icon:"error",title:"無法執行動作，請稍後再試！"});case 21:case"end":return e.stop()}},e,null,[[0,16]])}))()},deleteFollowing:function(r){var s=this;return Object(n.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s.isProcessing=!0,e.next=4,i.a.unfollowUser(r.followerId);case 4:if(t=e.sent,"success"!==(t=t.data).status)throw new Error(t.message);e.next=8;break;case 8:s.renderAfterFollowToggle(r),l.a.fire({icon:"success",title:"取消追蹤成功！"}),s.isProcessing=!1,e.next=18;break;case 13:e.prev=13,e.t0=e.catch(0),s.isProcessing=!1,l.a.fire({icon:"error",title:"無法追蹤，請稍後再試！"});case 18:case"end":return e.stop()}},e,null,[[0,13]])}))()},renderAfterFollowToggle:function(t){this.followers=this.followers.map(function(e){return e.followerId===t.followerId?Object(o.a)(Object(o.a)({},e),{},{isFollowing:!t.isFollowing}):e})}}},d=(r("bcc2"),r("2877")),c=Object(d.a)(f,function(){var r=this,e=r.$createElement,s=r._self._c||e;return s("div",{staticClass:"container"},r._l(r.followers,function(t){return s("div",{key:t.followerId,staticClass:"follower-container"},[s("div",{staticClass:"avatar"},[s("img",{attrs:{src:r._f("emptyImageFilter")(t.avatar),alt:""}})]),s("div",{staticClass:"follower-info"},[s("div",{staticClass:"isfollowed-info"},[s("div",{staticClass:"follower-title"},[s("router-link",{attrs:{to:{name:"user-profile",params:{id:t.followerId}}}},[s("div",{staticClass:"name"},[r._v(r._s(t.name))])]),s("div",{staticClass:"account"},[r._v("@"+r._s(t.account))])],1),s("div",{staticClass:"toggleFollow"},[t.isFollowing?s("button",{staticClass:"btn isFollowing",attrs:{disabled:r.isProcessing},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),r.deleteFollowing(t)}}},[r._v(" 正在跟隨 ")]):s("button",{staticClass:"btn",attrs:{disabled:r.isProcessing},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),r.addFollowing(t)}}},[r._v(" 跟隨 ")])])]),s("p",[r._v(r._s(t.introduction))])])])}),0)},[],!1,null,"619ef85e",null).exports,u=r("999e"),f=r("b572"),f={name:"UserFollowers",components:{UserSidebar:s.a,UserFollowNavtabs:a.a,UserFollowersList:c,RecommendedFollowers:u.a,Spinner:f.a},beforeRouteEnter:function(r,e,t){return Object(n.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{t(function(e){var t=r.params.id;e.fetchUser(t),e.fetchFollowers(t),e.fetchingData=!0})}catch(e){}case 1:case"end":return e.stop()}},e)}))()},beforeRouteUpdate:function(r,e,s){var a=this;return Object(n.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.fetchingData&&s(),t=r.params.id,e.next=5,a.fetchUser(t);case 5:a.fetchFollowers(t),s(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0);case 12:case"end":return e.stop()}},e,null,[[0,9]])}))()},data:function(){return{followers:[],user:{},isLoading:!0,fetchingData:!1}},created:function(){var e=this.$route.params.id;this.fetchFollowers(e),this.fetchUser(e)},methods:{fetchUser:function(r){var s=this;return Object(n.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.getUser(r);case 3:t=e.sent,t=t.data,s.user=t,s.isLoading=!1,e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),s.isLoading=!1,l.a.fire({icon:"error",title:"無法取得使用者資料，請稍後再試！"});case 14:case"end":return e.stop()}},e,null,[[0,9]])}))()},fetchFollowers:function(r){var s=this;return Object(n.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.getUserFollowers(r);case 3:t=e.sent,t=t.data,s.followers=t,s.isLoading=!1,e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),s.isLoading=!1,l.a.fire({icon:"error",title:"無法取得跟隨者資料，請稍後再試！"});case 14:case"end":return e.stop()}},e,null,[[0,9]])}))()}}},f=(r("a2c2"),Object(d.a)(f,function(){var t=this,e=t.$createElement,e=t._self._c||e;return e("div",{attrs:{id:"UserFollowers flex"}},[t.isLoading?e("Spinner"):[e("UserSidebar"),e("div",{staticClass:"mainSection"},[e("div",{staticClass:"title"},[e("div",{staticClass:"pre-page"},[e("button",{staticClass:"btn",on:{click:function(e){return t.$router.back()}}},[e("img",{attrs:{src:r("b66c"),alt:""}})])]),e("div",{staticClass:"title-info"},[e("div",{staticClass:"name"},[t._v(t._s(t.user.name))]),e("div",{staticClass:"tweet-count"},[t._v(t._s(t.user.tweetCount)+"推文")])])]),e("div",{staticClass:"admin-users-card"},[e("UserFollowNavtabs",{attrs:{userData:t.user}}),e("UserFollowersList",{attrs:{followers:t.followers}})],1)]),e("RecommendedFollowers")]],2)},[],!1,null,"dd82efe4",null));t.default=f.exports},6431:function(e,t,r){},7202:function(e,t,r){},a2c2:function(e,t,r){"use strict";r("7202")},b66c:function(e,t,r){e.exports=r.p+"img/lastPage.7110cc7e.svg"},bcc2:function(e,t,r){"use strict";r("c7ee")},c7ee:function(e,t,r){},cfa6:function(e,t,r){"use strict";var s={name:"UserFollowNavtabs",props:{userData:{type:Object,required:!0}}},r=(r("f79c"),r("2877")),s=Object(r.a)(s,function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("ul",{staticClass:"nav nav-tabs"},[t("li",{staticClass:"nav-item"},[t("router-link",{staticClass:"nav-link",attrs:{to:{name:"user-profile-followers",params:{id:e.userData.id}}}},[e._v(" 跟隨者 ")])],1),t("li",{staticClass:"nav-item"},[t("router-link",{staticClass:"nav-link",attrs:{to:{name:"user-profile-following",params:{id:e.userData.id}}}},[e._v(" 正在跟隨 ")])],1)])},[],!1,null,"544e26b4",null);t.a=s.exports},f79c:function(e,t,r){"use strict";r("6431")}}]);