(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-72e25456"],{"0222":function(e,t,r){"use strict";r("351c")},"236c":function(e,t,r){"use strict";r.r(t);var a,s=r("5530"),c=r("1da1"),n=(r("d81d"),r("96cf"),r("c8e4")),i=r("7950"),u=r("92e8"),o=(r("a4d3"),r("e01a"),r("b0c0"),r("d3b7"),r("3ca3"),r("ddb0"),r("da7c")),l=r("2f62"),f=r("2fa3"),d=r("6783"),p=r("4cce"),m={name:"UserProfileReplyList",components:{TweetItem:o.a},props:{userData:{type:Object,required:!0}},data:function(){return{user:{},tweets:[],isLoading:!0}},methods:{fetchUser:function(e){this.user=e},fetchALlRepliedTweets:function(r){var a=this;return Object(c.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.isLoading=!0,e.next=4,d.a.getAllRepliedTweets(r);case 4:t=e.sent,t=t.data,a.tweets=t.map(function(e){var t=e.id,r=e.TweetId,a=e.Tweet,n=a.createdAt,s=a.description,c=a.isLiked,i=a.likeCount,u=a.replyCount,o=e.Tweet.User,l=o.avatar,a=o.name,e=o.account;return{replyId:t,UserId:o.id,createdAt:n,description:s,id:r,isLiked:c,likeCount:i,replyCount:u,user:{avatar:l,name:a,account:e}}}),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),f.a.fire({icon:"error",title:"無法取得推文資料，請稍後再試！"});case 14:case"end":return e.stop()}},e,null,[[0,9]])}))()},fetchAllReplyUsers:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.next=3,Promise.all(t.tweets.map(function(){var t=Object(c.a)(regeneratorRuntime.mark(function e(t){var r,a,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.getUser(t.UserId);case 3:return a=e.sent,n=a.data,r=n.avatar,a=n.name,n=n.account,e.abrupt("return",Object(s.a)(Object(s.a)({},t),{},{user:{avatar:r,name:a,account:n}}));case 9:e.prev=9,e.t0=e.catch(0),f.a.fire({icon:"error",title:"無法取得完整回覆資料，請稍後再試！"});case 14:case"end":return e.stop()}},e,null,[[0,9]])}));return function(e){return t.apply(this,arguments)}}()));case 3:t.tweets=e.sent,t.isLoading=!1;case 5:case"end":return e.stop()}},e)}))()}},computed:Object(s.a)({},Object(l.b)(["currentUser"])),watch:{userData:{handler:(a=Object(c.a)(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.fetchUser(t),r=this.user.id,e.next=5,this.fetchALlRepliedTweets(r);case 5:return e.next=7,this.fetchAllReplyUsers();case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),f.a.fire({icon:"error",title:"無法取得推文資料，請稍後再試！"});case 13:case"end":return e.stop()}},e,this,[[0,9]])})),function(e){return a.apply(this,arguments)}),deep:!0}}},o=(r("0222"),r("2877")),l=Object(o.a)(m,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("ul",{staticClass:"tweetList"},[t.isLoading?[r("p",{staticClass:"loading"},[t._v("資料讀取中...")])]:[t.tweets.length?t._e():r("p",{staticClass:"noData"},[t._v("無資料")]),t._l(t.tweets,function(e){return r("TweetItem",{key:e.replyId,attrs:{userData:t.user,tweet:e}})})]],2)])},[],!1,null,"31901c32",null).exports,m=r("999e"),m={name:"UserProfile",components:{UserSidebar:n.a,UserProfileCard:i.a,UserProfileNavtabs:u.a,UserProfileReplyList:l,RecommendedFollowers:m.a},beforeRouteEnter:function(r,e,t){return Object(c.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{t(function(e){var t=r.params.id;e.fetchUser(t),e.fetchingData=!0})}catch(e){}case 1:case"end":return e.stop()}},e)}))()},beforeRouteUpdate:function(r,e,a){var n=this;return Object(c.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n.fetchingData&&a(),t=r.params.id,e.next=5,n.fetchUser(t);case 5:a(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0);case 11:case"end":return e.stop()}},e,null,[[0,8]])}))()},data:function(){return{user:{},tweets:[],fetchingData:!1}},methods:{fetchUser:function(r){var a=this;return Object(c.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.getUser(r);case 3:t=e.sent,t=t.data,a.user=t,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),f.a.fire({icon:"error",title:"無法取得使用者資訊，請稍後再試！"});case 12:case"end":return e.stop()}},e,null,[[0,8]])}))()},afterToggleLike:function(t){this.tweets=this.tweets.map(function(e){return e.id===t.id?Object(s.a)(Object(s.a)({},e),{},{isLiked:t.isLiked}):e})},afterCreateReply:function(t){this.tweets=this.tweets.map(function(e){return e.id===t?Object(s.a)(Object(s.a)({},e),{},{replyCount:e.replyCount+1}):e})}}},m=(r("d7ba"),Object(o.a)(m,function(){var t=this,e=t.$createElement,e=t._self._c||e;return e("div",{attrs:{id:"userProfileReply"}},[e("UserSidebar"),e("div",{staticClass:"mainSection"},[e("div",{staticClass:"title stickyTitle"},[e("button",{staticClass:"btn",on:{click:function(e){return t.$router.back()}}},[e("img",{attrs:{src:r("b66c"),alt:""}})]),e("div",{staticClass:"nameTag"},[e("p",[t._v(t._s(t.user.name))]),e("p",[t._v(t._s(t.user.tweetCount)+" 則推文")])])]),e("div",{staticClass:"admin-users-card"},[e("UserProfileCard",{attrs:{userData:t.user}}),e("UserProfileNavtabs",{attrs:{userData:t.user}}),e("UserProfileReplyList",{attrs:{userData:t.user}})],1)]),e("RecommendedFollowers")],1)},[],!1,null,"6f210178",null));t.default=m.exports},"351c":function(e,t,r){},d7ba:function(e,t,r){"use strict";r("da81")},da81:function(e,t,r){}}]);