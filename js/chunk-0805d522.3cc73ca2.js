(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0805d522"],{"0878":function(e,t,r){"use strict";r("7e6a")},"0c12":function(e,t,r){"use strict";r("4b06")},"0d3b":function(e,t,r){var a=r("d039"),s=r("b622"),n=r("c430"),i=s("iterator");e.exports=!a(function(){var e=new URL("b?a=1&b=2&c=3","http://a"),r=e.searchParams,a="";return e.pathname="c%20d",r.forEach(function(e,t){r.delete("b"),a+=t+e}),n&&!e.toJSON||!r.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==r.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!r[i]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==a||"x"!==new URL("http://x",void 0).host})},"2b3d":function(e,t,r){"use strict";r("3ca3");function g(e,t){var r,a,s;if("["==t.charAt(0))return"]"==t.charAt(t.length-1)&&(r=Q(t.slice(1,-1)))?void(e.host=r):M;if(ae(e))return t=R(t),Z.test(t)||null===(r=K(t))?M:void(e.host=r);if(H.test(t))return M;for(r="",a=D(t),s=0;s<a.length;s++)r+=te(a[s],V);e.host=r}function l(e){var t,r,a,s;if("number"==typeof e){for(t=[],r=0;r<4;r++)t.unshift(e%256),e=A(e/256);return t.join(".")}if("object"!=typeof e)return e;for(t="",a=function(e){for(var t=null,r=1,a=null,s=0,n=0;n<8;n++)0!==e[n]?(r<s&&(t=a,r=s),a=null,s=0):(null===a&&(a=n),++s);return r<s&&(t=a,r=s),t}(e),r=0;r<8;r++)s&&0===e[r]||(s=s&&!1,a===r?(t+=r?":":"::",s=!0):(t+=e[r].toString(16),r<7&&(t+=":")));return"["+t+"]"}function b(e){return""!=e.username||""!=e.password}function s(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme}function w(e,t){return 2==e.length&&E.test(e.charAt(0))&&(":"==(e=e.charAt(1))||!t&&"|"==e)}function U(e){var t;return 1<e.length&&w(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)}function y(e){var t=e.path,r=t.length;!r||"file"==e.scheme&&1==r&&w(t[0],!0)||t.pop()}function o(e,t,r,a){var s,n,i,o=r||se,c=0,u="",l=!1,f=!1,h=!1;for(r||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(X,"")),t=t.replace(G,""),s=D(t);c<=s.length;){switch(n=s[c],o){case se:if(!n||!E.test(n)){if(r)return q;o=ie;continue}u+=n.toLowerCase(),o=ne;break;case ne:if(n&&($.test(n)||"+"==n||"-"==n||"."==n))u+=n.toLowerCase();else{if(":"!=n){if(r)return q;u="",o=ie,c=0;continue}if(r&&(ae(e)!=C(re,u)||"file"==u&&(b(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=u,r)return void(ae(e)&&re[e.scheme]==e.port&&(e.port=null));u="","file"==e.scheme?o=ge:ae(e)&&a&&a.scheme==e.scheme?o=oe:ae(e)?o=fe:"/"==s[c+1]?(o=ce,c++):(e.cannotBeABaseURL=!0,e.path.push(""),o=ke)}break;case ie:if(!a||a.cannotBeABaseURL&&"#"!=n)return q;if(a.cannotBeABaseURL&&"#"==n){e.scheme=a.scheme,e.path=a.path.slice(),e.query=a.query,e.fragment="",e.cannotBeABaseURL=!0,o=De;break}o="file"==a.scheme?ge:ue;continue;case oe:if("/"!=n||"/"!=s[c+1]){o=ue;continue}o=he,c++;break;case ce:if("/"==n){o=de;break}o=ye;continue;case ue:if(e.scheme=a.scheme,n==k)e.username=a.username,e.password=a.password,e.host=a.host,e.port=a.port,e.path=a.path.slice(),e.query=a.query;else if("/"==n||"\\"==n&&ae(e))o=le;else if("?"==n)e.username=a.username,e.password=a.password,e.host=a.host,e.port=a.port,e.path=a.path.slice(),e.query="",o=Ce;else{if("#"!=n){e.username=a.username,e.password=a.password,e.host=a.host,e.port=a.port,e.path=a.path.slice(),e.path.pop(),o=ye;continue}e.username=a.username,e.password=a.password,e.host=a.host,e.port=a.port,e.path=a.path.slice(),e.query=a.query,e.fragment="",o=De}break;case le:if(!ae(e)||"/"!=n&&"\\"!=n){if("/"!=n){e.username=a.username,e.password=a.password,e.host=a.host,e.port=a.port,o=ye;continue}o=de}else o=he;break;case fe:if(o=he,"/"!=n||"/"!=u.charAt(c+1))continue;c++;break;case he:if("/"==n||"\\"==n)break;o=de;continue;case de:if("@"==n){l&&(u="%40"+u);for(var l=!0,d=D(u),p=0;p<d.length;p++){var m=d[p];":"!=m||h?(m=te(m,ee),h?e.password+=m:e.username+=m):h=!0}u=""}else if(n==k||"/"==n||"?"==n||"#"==n||"\\"==n&&ae(e)){if(l&&""==u)return"Invalid authority";c-=D(u).length+1,u="",o=pe}else u+=n;break;case pe:case me:if(r&&"file"==e.scheme){o=we;continue}if(":"!=n||f){if(n==k||"/"==n||"?"==n||"#"==n||"\\"==n&&ae(e)){if(ae(e)&&""==u)return M;if(r&&""==u&&(b(e)||null!==e.port))return;if(i=g(e,u))return i;if(u="",o=Ue,r)return;continue}"["==n?f=!0:"]"==n&&(f=!1),u+=n}else{if(""==u)return M;if(i=g(e,u))return i;if(u="",o=ve,r==me)return}break;case ve:if(!B.test(n)){if(n==k||"/"==n||"?"==n||"#"==n||"\\"==n&&ae(e)||r){if(""!=u){var v=parseInt(u,10);if(65535<v)return O;e.port=ae(e)&&v===re[e.scheme]?null:v,u=""}if(r)return;o=Ue;continue}return O}u+=n;break;case ge:if(e.scheme="file","/"==n||"\\"==n)o=be;else{if(!a||"file"!=a.scheme){o=ye;continue}if(n==k)e.host=a.host,e.path=a.path.slice(),e.query=a.query;else if("?"==n)e.host=a.host,e.path=a.path.slice(),e.query="",o=Ce;else{if("#"!=n){U(s.slice(c).join(""))||(e.host=a.host,e.path=a.path.slice(),y(e)),o=ye;continue}e.host=a.host,e.path=a.path.slice(),e.query=a.query,e.fragment="",o=De}}break;case be:if("/"==n||"\\"==n){o=we;break}a&&"file"==a.scheme&&!U(s.slice(c).join(""))&&(w(a.path[0],!0)?e.path.push(a.path[0]):e.host=a.host),o=ye;continue;case we:if(n==k||"/"==n||"\\"==n||"?"==n||"#"==n){if(!r&&w(u))o=ye;else if(""==u){if(e.host="",r)return;o=Ue}else{if(i=g(e,u))return i;if("localhost"==e.host&&(e.host=""),r)return;u="",o=Ue}continue}u+=n;break;case Ue:if(ae(e)){if(o=ye,"/"!=n&&"\\"!=n)continue}else if(r||"?"!=n)if(r||"#"!=n){if(n!=k&&(o=ye,"/"!=n))continue}else e.fragment="",o=De;else e.query="",o=Ce;break;case ye:if(n==k||"/"==n||"\\"==n&&ae(e)||!r&&("?"==n||"#"==n)){if(".."===(v=(v=u).toLowerCase())||"%2e."===v||".%2e"===v||"%2e%2e"===v?(y(e),"/"==n||"\\"==n&&ae(e)||e.path.push("")):"."===(v=u)||"%2e"===v.toLowerCase()?"/"==n||"\\"==n&&ae(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&w(u)&&(e.host&&(e.host=""),u=u.charAt(0)+":"),e.path.push(u)),u="","file"==e.scheme&&(n==k||"?"==n||"#"==n))for(;1<e.path.length&&""===e.path[0];)e.path.shift();"?"==n?(e.query="",o=Ce):"#"==n&&(e.fragment="",o=De)}else u+=te(n,Y);break;case ke:"?"==n?(e.query="",o=Ce):"#"==n?(e.fragment="",o=De):n!=k&&(e.path[0]+=te(n,V));break;case Ce:r||"#"!=n?n!=k&&("'"==n&&ae(e)?e.query+="%27":e.query+="#"==n?"%23":te(n,V)):(e.fragment="",o=De);break;case De:n!=k&&(e.fragment+=te(n,W))}c++}}var k,a,n,i=r("23e7"),c=r("83ab"),u=r("0d3b"),f=r("da84"),h=r("37e8"),d=r("6eeb"),p=r("19aa"),C=r("5135"),m=r("60da"),D=r("4df4"),v=r("6547").codeAt,R=r("5fb2"),x=r("d44e"),P=r("9861"),r=r("69f3"),S=f.URL,_=P.URLSearchParams,L=P.getState,I=r.set,j=r.getterFor("URL"),A=Math.floor,F=Math.pow,q="Invalid scheme",M="Invalid host",O="Invalid port",E=/[A-Za-z]/,$=/[\d+-.A-Za-z]/,B=/\d/,N=/^(0x|0X)/,T=/^[0-7]+$/,J=/^\d+$/,z=/^[\dA-Fa-f]+$/,Z=/[\u0000\t\u000A\u000D #%/:?@[\\]]/,H=/[\u0000\t\u000A\u000D #/:?@[\\]]/,X=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,G=/[\t\u000A\u000D]/g,K=function(e){var t,r,a,s,n,i,o,c=e.split(".");if(c.length&&""==c[c.length-1]&&c.pop(),4<(t=c.length))return e;for(r=[],a=0;a<t;a++){if(""==(s=c[a]))return e;if(n=10,1<s.length&&"0"==s.charAt(0)&&(n=N.test(s)?16:8,s=s.slice(8==n?1:2)),""===s)i=0;else{if(!(10==n?J:8==n?T:z).test(s))return e;i=parseInt(s,n)}r.push(i)}for(a=0;a<t;a++)if(i=r[a],a==t-1){if(i>=F(256,5-t))return null}else if(255<i)return null;for(o=r.pop(),a=0;a<r.length;a++)o+=r[a]*F(256,3-a);return o},Q=function(e){function t(){return e.charAt(h)}var r,a,s,n,i,o,c,u=[0,0,0,0,0,0,0,0],l=0,f=null,h=0;if(":"==t()){if(":"!=e.charAt(1))return;h+=2,f=++l}for(;t();){if(8==l)return;if(":"!=t()){for(r=a=0;a<4&&z.test(t());)r=16*r+parseInt(t(),16),h++,a++;if("."==t()){if(0==a)return;if(h-=a,6<l)return;for(s=0;t();){if(n=null,0<s){if(!("."==t()&&s<4))return;h++}if(!B.test(t()))return;for(;B.test(t());){if(i=parseInt(t(),10),null===n)n=i;else{if(0==n)return;n=10*n+i}if(255<n)return;h++}u[l]=256*u[l]+n,2!=++s&&4!=s||l++}if(4!=s)return;break}if(":"==t()){if(h++,!t())return}else if(t())return;u[l++]=r}else{if(null!==f)return;h++,f=++l}}if(null!==f)for(o=l-f,l=7;0!=l&&0<o;)c=u[l],u[l--]=u[f+o-1],u[f+--o]=c;else if(8!=l)return;return u},V={},W=m({},V,{" ":1,'"':1,"<":1,">":1,"`":1}),Y=m({},W,{"#":1,"?":1,"{":1,"}":1}),ee=m({},Y,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),te=function(e,t){var r=v(e,0);return 32<r&&r<127&&!C(t,e)?e:encodeURIComponent(e)},re={ftp:21,file:null,http:80,https:443,ws:80,wss:443},ae=function(e){return C(re,e.scheme)},se={},ne={},ie={},oe={},ce={},ue={},le={},fe={},he={},de={},pe={},me={},ve={},ge={},be={},we={},Ue={},ye={},ke={},Ce={},De={},Re=function(e){var t,r=p(this,Re,"URL"),a=1<arguments.length?arguments[1]:void 0,e=String(e),s=I(r,{type:"URL"});if(void 0!==a)if(a instanceof Re)t=j(a);else if(i=o(t={},String(a)))throw TypeError(i);if(i=o(s,e,null,t))throw TypeError(i);var n=s.searchParams=new _,i=L(n);i.updateSearchParams(s.query),i.updateURL=function(){s.query=String(n)||null},c||(r.href=xe.call(r),r.origin=Pe.call(r),r.protocol=Se.call(r),r.username=_e.call(r),r.password=Le.call(r),r.host=Ie.call(r),r.hostname=je.call(r),r.port=Ae.call(r),r.pathname=Fe.call(r),r.search=qe.call(r),r.searchParams=Me.call(r),r.hash=Oe.call(r))},r=Re.prototype,xe=function(){var e=j(this),t=e.scheme,r=e.username,a=e.password,s=e.host,n=e.port,i=e.path,o=e.query,c=e.fragment,u=t+":";return null!==s?(u+="//",b(e)&&(u+=r+(a?":"+a:"")+"@"),u+=l(s),null!==n&&(u+=":"+n)):"file"==t&&(u+="//"),u+=e.cannotBeABaseURL?i[0]:i.length?"/"+i.join("/"):"",null!==o&&(u+="?"+o),null!==c&&(u+="#"+c),u},Pe=function(){var e=j(this),t=e.scheme,r=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(e){return"null"}return"file"!=t&&ae(e)?t+"://"+l(e.host)+(null!==r?":"+r:""):"null"},Se=function(){return j(this).scheme+":"},_e=function(){return j(this).username},Le=function(){return j(this).password},Ie=function(){var e=j(this),t=e.host,e=e.port;return null===t?"":null===e?l(t):l(t)+":"+e},je=function(){var e=j(this).host;return null===e?"":l(e)},Ae=function(){var e=j(this).port;return null===e?"":String(e)},Fe=function(){var e=j(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},qe=function(){var e=j(this).query;return e?"?"+e:""},Me=function(){return j(this).searchParams},Oe=function(){var e=j(this).fragment;return e?"#"+e:""},m=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};c&&h(r,{href:m(xe,function(e){var t=j(this),e=String(e),e=o(t,e);if(e)throw TypeError(e);L(t.searchParams).updateSearchParams(t.query)}),origin:m(Pe),protocol:m(Se,function(e){var t=j(this);o(t,String(e)+":",se)}),username:m(_e,function(e){var t=j(this),r=D(String(e));if(!s(t)){t.username="";for(var a=0;a<r.length;a++)t.username+=te(r[a],ee)}}),password:m(Le,function(e){var t=j(this),r=D(String(e));if(!s(t)){t.password="";for(var a=0;a<r.length;a++)t.password+=te(r[a],ee)}}),host:m(Ie,function(e){var t=j(this);t.cannotBeABaseURL||o(t,String(e),pe)}),hostname:m(je,function(e){var t=j(this);t.cannotBeABaseURL||o(t,String(e),me)}),port:m(Ae,function(e){var t=j(this);s(t)||(""==(e=String(e))?t.port=null:o(t,e,ve))}),pathname:m(Fe,function(e){var t=j(this);t.cannotBeABaseURL||(t.path=[],o(t,e+"",Ue))}),search:m(qe,function(e){var t=j(this);""==(e=String(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",o(t,e,Ce)),L(t.searchParams).updateSearchParams(t.query)}),searchParams:m(Me),hash:m(Oe,function(e){var t=j(this);""!=(e=String(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",o(t,e,De)):t.fragment=null})}),d(r,"toJSON",function(){return xe.call(this)},{enumerable:!0}),d(r,"toString",function(){return xe.call(this)},{enumerable:!0}),S&&(a=S.createObjectURL,n=S.revokeObjectURL,a&&d(Re,"createObjectURL",function(e){return a.apply(S,arguments)}),n&&d(Re,"revokeObjectURL",function(e){return n.apply(S,arguments)})),x(Re,"URL"),i({global:!0,forced:!u,sham:!c},{URL:Re})},3157:function(e,t,r){e.exports=r.p+"img/btn_noti_active.71b51893.svg"},"3ad0":function(e,t,r){},"3bae":function(e,t,r){"use strict";var a=r("2fa3");t.a={getPublicRoom:function(){return a.b.get("/rooms/4")},createPrivateRoom:function(e){return a.b.post("/rooms",{userId:e})},getPrivateRoom:function(e){return a.b.get("/rooms/".concat(e))},getNotification:function(){return a.b.get("/rooms/notifications")},getRoom:function(e){return a.b.get("/rooms/".concat(e))},getRoomsByUser:function(){return a.b.get("/rooms")},getAvailableUsers:function(){return a.b.get("rooms/availableUsers")},getUnread:function(){return a.b.get("/private/unread")}}},"44a2":function(e,t,r){"use strict";r("8914")},"4b06":function(e,t,r){},"4df4":function(e,t,r){"use strict";var d=r("0366"),p=r("7b0b"),m=r("9bdd"),v=r("e95a"),g=r("50c4"),b=r("8418"),w=r("35a1");e.exports=function(e){var t,r,a,s,n,i,o=p(e),c="function"==typeof this?this:Array,u=arguments.length,l=1<u?arguments[1]:void 0,f=void 0!==l,e=w(o),h=0;if(f&&(l=d(l,2<u?arguments[2]:void 0,2)),null==e||c==Array&&v(e))for(r=new c(t=g(o.length));h<t;h++)i=f?l(o[h],h):o[h],b(r,h,i);else for(n=(s=e.call(o)).next,r=new c;!(a=n.call(s)).done;h++)i=f?m(s,l,[a.value,h],!0):a.value,b(r,h,i);return r.length=h,r}},"5fa0":function(e,t,r){e.exports=r.p+"img/btn_noti.3d65b894.svg"},"5fb2":function(e,t,r){"use strict";function g(e){return e+22+75*(e<26)}function n(e){var t,r=[],a=(e=function(e){for(var t=[],r=0,a=e.length;r<a;){var s,n=e.charCodeAt(r++);55296<=n&&n<=56319&&r<a?56320==(64512&(s=e.charCodeAt(r++)))?t.push(((1023&n)<<10)+(1023&s)+65536):(t.push(n),r--):t.push(n)}return t}(e)).length,s=128,n=0,i=72;for(l=0;l<e.length;l++)(t=e[l])<128&&r.push(y(t));var o=r.length,c=o;for(o&&r.push("-");c<a;){for(var u=b,l=0;l<e.length;l++)s<=(t=e[l])&&t<u&&(u=t);var f=c+1;if(u-s>U((b-n)/f))throw RangeError(w);for(n+=(u-s)*f,s=u,l=0;l<e.length;l++){if((t=e[l])<s&&++n>b)throw RangeError(w);if(t==s){for(var h=n,d=36;;d+=36){var p=d<=i?1:i+26<=d?26:d-i;if(h<p)break;var m=h-p,v=36-p;r.push(y(g(p+m%v))),h=U(m/v)}r.push(y(g(h))),i=function(e,t,r){var a=0;for(e=r?U(e/700):e>>1,e+=U(e/t);455<e;a+=36)e=U(e/35);return U(a+36*e/(e+38))}(n,f,c==o),n=0,++c}}++n,++s}return r.join("")}var b=2147483647,i=/[^\0-\u007E]/,o=/[.\u3002\uFF0E\uFF61]/g,w="Overflow: input needs wider integers to process",U=Math.floor,y=String.fromCharCode;e.exports=function(e){for(var t,r=[],a=e.toLowerCase().replace(o,".").split("."),s=0;s<a.length;s++)t=a[s],r.push(i.test(t)?"xn--"+n(t):t);return r.join(".")}},7950:function(e,t,r){"use strict";var a=r("5530"),n=r("1da1"),s=(r("96cf"),r("2f62")),i=r("2708"),o=r("2fa3"),c=r("4cce"),u=[function(){var e=this.$createElement,e=this._self._c||e;return e("label",{attrs:{for:"coverInput"}},[e("img",{attrs:{src:r("f16e"),alt:""}})])},function(){var e=this.$createElement,e=this._self._c||e;return e("label",{attrs:{for:"avatarInput"}},[e("img",{attrs:{src:r("f16e"),alt:""}})])}],l=(r("b0c0"),r("d3b7"),r("3ca3"),r("ddb0"),r("2b3d"),r("1157")),f=r.n(l),h={name:"UserEditModal",mixins:[i.a],props:{userData:{type:Object,required:!0}},data:function(){return{form:{introduction:"",name:"",avatar:"",cover:""},isProcessing:!1}},methods:{saveSetting:function(a){var s=this;return Object(n.a)(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s.isProcessing=!0,s.formDataCheck(s.form)){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,t=s.userData.id,r=a.target,r=new FormData(r),e.next=10,c.a.putUser(t,r);case 10:if(r=e.sent,"success"!==(r=r.data).status)throw new Error(r.message);e.next=14;break;case 14:s.$emit("afterSaveSetting",s.form),s.clearForm(),f()("#edit-user-modal").hide(),f()(".modal-backdrop").remove(),f()("body").removeClass("modal-open"),o.a.fire({icon:"success",title:"儲存成功！"}),s.isProcessing=!1,e.next=30;break;case 25:e.prev=25,e.t0=e.catch(4),s.isProcessing=!1,o.a.fire({icon:"error",title:"無法儲存，請稍後再試！"});case 30:case"end":return e.stop()}},e,null,[[4,25]])}))()},formDataCheck:function(e){var t=!1;return(e.name||e.name.length<50)&&(t=!0),t=e.introduction.length<160?!0:t},handleFileChange:function(e,t){e=e.target.files;e.length&&(e=window.URL.createObjectURL(e[0]),"cover"===t?this.form.cover=e:this.form.avatar=e)},deleteCover:function(){this.form.cover=""},clearForm:function(){this.form=this.userData,f()("#edit-user-modal").hide(),f()(".modal-backdrop").remove()}},watch:{userData:{deep:!0,handler:function(e){var t=e.name,r=e.introduction,a=e.avatar,e=e.cover;this.form={name:t,introduction:r,avatar:a,cover:e}}}}},d=(r("0878"),r("2877")),l=Object(d.a)(h,function(){var t=this,e=t.$createElement,e=t._self._c||e;return e("div",{staticClass:"modal fade",attrs:{id:"edit-user-modal",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("form",{attrs:{action:""},on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.saveSetting(e)}}},[e("div",{staticClass:"modal-header"},[e("button",{staticClass:"start btn",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"},on:{click:t.clearForm}},[e("img",{attrs:{src:r("27ae"),alt:""}})]),e("p",{staticClass:"title"},[t._v("編輯個人資料")]),e("button",{staticClass:"btn saveBtn",attrs:{disabled:t.isProcessing,type:"submit"}},[e("p",[t._v(t._s(t.isProcessing?"儲存中":"儲存"))])])]),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"coverImagePanel"},[e("div",{staticClass:"coverImage"},[e("img",{attrs:{src:t._f("emptyImageFilter")(t.form.cover),alt:""}})]),e("div",{staticClass:"coverImagePanel-btns"},[e("div",{staticClass:"uploadPhoto"},[t._m(0),e("input",{staticClass:"photo-input-hidden",attrs:{id:"coverInput",type:"file",name:"cover",accept:".png, .jpg, .jpeg"},on:{change:function(e){return t.handleFileChange(e,"cover")}}})]),e("div",{staticClass:"deletePhoto"},[e("img",{attrs:{src:r("c848"),alt:""},on:{click:t.deleteCover}})])])]),e("div",{staticClass:"avatarPanel"},[e("div",{staticClass:"avatar"},[e("img",{attrs:{src:t._f("emptyImageFilter")(t.form.avatar),alt:""}})]),e("div",{staticClass:"uploadPhoto"},[t._m(1),e("input",{staticClass:"photo-input-hidden",attrs:{id:"avatarInput",type:"file",name:"avatar",accept:".png, .jpg, .jpeg"},on:{change:function(e){return t.handleFileChange(e,"avatar")}}})])]),e("div",{staticClass:"inputForm"},[e("div",{staticClass:"row"},[e("label",{attrs:{for:"name"}},[t._v("名稱")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],attrs:{id:"name",name:"name",type:"text",maxlength:"50",required:""},domProps:{value:t.form.name},on:{input:function(e){e.target.composing||t.$set(t.form,"name",e.target.value)}}}),e("p",{staticClass:"textLength"},[t._v(" "+t._s(t.form.name?t.form.name.length:0)+"/50 ")])]),e("div",{staticClass:"row"},[e("label",{attrs:{for:"name"}},[t._v("自我介紹")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.introduction,expression:"form.introduction"}],attrs:{id:"introduction",name:"introduction",cols:"80",rows:"4",maxlength:"160"},domProps:{value:t.form.introduction},on:{input:function(e){e.target.composing||t.$set(t.form,"introduction",e.target.value)}}}),e("p",{staticClass:"textLength"},[t._v(" "+t._s(t.form.introduction?t.form.introduction.length:0)+"/160 ")])])])])])])])])},u,!1,null,"9a4e642e",null).exports,h=[function(){var e=this.$createElement,e=this._self._c||e;return e("button",{staticClass:"start btn",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("img",{attrs:{src:r("27ae"),alt:""}})])}],p=(r("7db0"),r("3bae")),u={name:"MessageModal",props:{userData:{type:Object,required:!0}},data:function(){return{localUserData:{},privateMessage:"",processing:!1}},methods:{sendPrivateMessage:function(){var s=this;return Object(n.a)(regeneratorRuntime.mark(function e(){var t,r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s.processing=!0,t=s.privateMessage){e.next=5;break}return o.a.fire({icon:"error",title:"尚未輸入訊息!"}),e.abrupt("return");case 5:return e.prev=5,e.next=8,p.a.getRoomsByUser();case 8:if(a=e.sent,r=a.data,a=r.find(function(e){return e.userId===s.localUserData.id}),r=!!a.length)return a.roomId,s.$socket.emit("private chat message",{roomId:a.roomId,userId:s.currentUser.id,newMessage:!r,message:t},function(){}),s.privateMessage="",s.processing=!1,o.a.fire({icon:"success",title:"已發送訊息"}),e.abrupt("return");e.next=23;break;case 23:return e.next=25,s.createNewChat(s.localUserData.id);case 25:return a=e.sent,s.joinPrivateRoom(a),s.$store.commit("setCurrentRoomId",a),s.$socket.emit("private chat message",{roomId:a,userId:s.currentUser.id,newMessage:!r,message:t},function(){}),s.privateMessage="",s.processing=!1,o.a.fire({icon:"success",title:"已發送訊息"}),e.abrupt("return");case 35:e.next=42;break;case 37:e.prev=37,e.t0=e.catch(5),s.processing=!1,o.a.fire({icon:"error",title:e.t0});case 42:case"end":return e.stop()}},e,null,[[5,37]])}))()},createNewChat:function(a){var s=this;return Object(n.a)(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.createPrivateRoom(a);case 3:if(r=e.sent,t=r.data,r=t.roomId,"success"!==t.status)throw new Error(t.message);e.next=10;break;case 10:return o.a.fire({icon:"success",title:"已建立連線！"}),s.$socket.emit("leave",s.currentUser.id,s.currentRoomId),e.abrupt("return",r);case 15:e.prev=15,e.t0=e.catch(0);case 18:case"end":return e.stop()}},e,null,[[0,15]])}))()},joinPrivateRoom:function(e){this.$socket.emit("join",{username:this.currentUser.name,roomId:e,userId:this.currentUser.id})},closeModal:function(e){e=document.querySelector("#tweetReplyModal-".concat(e));e.classList.remove("show"),e.setAttribute("aria-hidden","true"),e.setAttribute("style","display: none");e=document.getElementsByClassName("modal-backdrop");document.body.removeChild(e[0])}},watch:{userData:{handler:function(){this.localUserData=this.userData},deep:!0}},computed:Object(a.a)({},Object(s.b)(["currentUser","currentRoomId"]))},h=(r("44a2"),Object(d.a)(u,function(){var t=this,e=t.$createElement,e=t._self._c||e;return e("div",{staticClass:"modal fade",attrs:{id:"messageModal",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[t._m(0),e("p",{staticClass:"title"},[t._v("傳送訊息給 "+t._s(t.localUserData.name))]),e("button",{staticClass:"btn send",attrs:{disabled:t.processing},on:{click:t.sendPrivateMessage}},[t._v(" 傳送 ")])]),e("div",{staticClass:"modal-body"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.privateMessage,expression:"privateMessage"}],attrs:{name:"privateMessage",id:"privateMessage",cols:"75",rows:"8",required:"",maxlength:"160"},domProps:{value:t.privateMessage},on:{input:function(e){e.target.composing||(t.privateMessage=e.target.value)}}})])])])])},h,!1,null,"8e5189d6",null)).exports,s={name:"UserProfileCard",mixins:[i.a],props:{userData:{type:Object,required:!0}},components:{UserEditModal:l,MessageModal:h},data:function(){return{localUserData:{},isProcessing:!1,roomId:""}},created:function(){var t=this;this.$bus.$on("afterFollowUser",function(e){t.afterFollowUser(e)}),this.$bus.$on("afterUnfollowUser",function(e){t.afterUnfollowUser(e)})},methods:{followUser:function(a){var s=this;return Object(n.a)(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s.isProcessing=!0,t=a.id,e.next=5,c.a.followUser(t);case 5:if(r=e.sent,"success"!==(r=r.data).status)throw new Error(r.message);e.next=9;break;case 9:o.a.fire({icon:"success",title:"追蹤成功！"}),s.afterFollowUser(a.id,!0),r=s.$route.params.id,s.$socket.emit("follow",{userId:r,currentUserId:s.currentUser.id}),s.isProcessing=!1,e.next=21;break;case 16:e.prev=16,e.t0=e.catch(0),s.isProcessing=!1,o.a.fire({icon:"error",title:"無法執行動作，請稍後再試！"});case 21:case"end":return e.stop()}},e,null,[[0,16]])}))()},unfollowUser:function(r){var a=this;return Object(n.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.isProcessing=!0,e.next=4,c.a.unfollowUser(r.id);case 4:if(t=e.sent,"success"!==(t=t.data).status)throw new Error(t.message);e.next=8;break;case 8:a.afterUnfollowUser(r.id,!0),o.a.fire({icon:"success",title:"取消追蹤成功！"}),a.isProcessing=!1,e.next=18;break;case 13:e.prev=13,e.t0=e.catch(0),a.isProcessing=!1,o.a.fire({icon:"error",title:"無法追蹤，請稍後再試！"});case 18:case"end":return e.stop()}},e,null,[[0,13]])}))()},afterFollowUser:function(e){return this.userData.id===e&&(1<arguments.length&&void 0!==arguments[1]&&arguments[1])?(this.localUserData.followerCount++,this.localUserData.isFollowed=!0,void this.$bus.$emit("toggleFollowFromProfileCard",e)):this.userData.id===e&&this.userData.id!==this.currentUser.id?(this.localUserData.followerCount++,void(this.localUserData.isFollowed=!0)):this.userData.id!==e&&this.userData.id===this.currentUser.id?void this.localUserData.followingCount++:this.userData.id!==e&&this.userData.id===this.currentUser.id?void this.localUserData.followingCount--:void 0},afterUnfollowUser:function(e){return this.userData.id===e&&(1<arguments.length&&void 0!==arguments[1]&&arguments[1])?(this.localUserData.followerCount--,this.localUserData.isFollowed=!1,void this.$bus.$emit("toggleFollowFromProfileCard",e)):this.userData.id===e&&this.userData.id!==this.currentUser.id?(this.localUserData.followerCount--,void(this.localUserData.isFollowed=!1)):this.userData.id!==e&&this.userData.id===this.currentUser.id?void this.localUserData.followingCount++:this.userData.id!==e&&this.userData.id===this.currentUser.id?void this.localUserData.followingCount--:void 0},showModal:function(e){f()(e).appendTo("body"),f()(e).modal("show")},afterSaveSetting:function(e){this.localUserData=Object(a.a)(Object(a.a)({},this.localUserData),e)},addSubscribe:function(r){var a=this;return Object(n.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.isProcessing=!0,t=r.id,e.next=5,c.a.subscribeUser(t);case 5:if(t=e.sent,"success"!==(t=t.data).status)throw new Error(t.message);e.next=9;break;case 9:a.localUserData.isSubscribed=!0,a.$socket.emit("subscription",JSON.parse(sessionStorage.getItem("rooms")),r.account),o.a.fire({icon:"success",title:"訂閱成功！"}),a.isProcessing=!1,e.next=20;break;case 15:e.prev=15,e.t0=e.catch(0),a.isProcessing=!1,o.a.fire({icon:"error",title:"無法執行動作，請稍後再試！"});case 20:case"end":return e.stop()}},e,null,[[0,15]])}))()},deleteSubscribe:function(r){var a=this;return Object(n.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.isProcessing=!0,t=r.id,e.next=5,c.a.unsubscribeUser(t);case 5:if(t=e.sent,"success"!==(t=t.data).status)throw new Error(t.message);e.next=9;break;case 9:a.localUserData.isSubscribed=!1,a.$socket.emit("cancel subscription",JSON.parse(sessionStorage.getItem("rooms")),r.account),o.a.fire({icon:"success",title:"取消訂閱成功！"}),a.isProcessing=!1,e.next=20;break;case 15:e.prev=15,e.t0=e.catch(0),a.isProcessing=!1,o.a.fire({icon:"error",title:"無法追蹤，請稍後再試！"});case 20:case"end":return e.stop()}},e,null,[[0,15]])}))()}},computed:Object(a.a)({},Object(s.b)(["currentUser"])),watch:{userData:{handler:function(){this.localUserData=this.userData},deep:!0},currentUser:{deep:!0,handler:function(){this.startSession()}}}},s=(r("0c12"),Object(d.a)(s,function(){var t=this,e=t.$createElement,e=t._self._c||e;return e("div",{staticClass:"container"},[e("div",{staticClass:"coverImage"},[e("img",{staticClass:"card-img-top",attrs:{src:t._f("emptyImageFilter")(t.localUserData.cover),alt:""}})]),e("div",{staticClass:"avatar"},[e("img",{staticClass:"card-img-top",attrs:{src:t._f("emptyImageFilter")(t.localUserData.avatar),alt:""}})]),e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("h5",{staticClass:"card-title"},[t._v(" "+t._s(t.localUserData.name||"UserName")+" ")]),e("p",{staticClass:"card-account"},[t._v("@"+t._s(t.localUserData.account))]),e("p",{staticClass:"card-content"},[t._v(" "+t._s(t.localUserData.introduction||"Placeholder: It's empty here, write something down!")+" ")]),e("div",{staticClass:"follow-condition"},[e("div",{staticClass:"following-count"},[e("router-link",{attrs:{to:"/userprofile/"+t.localUserData.id+"/following"}},[e("span",[t._v(t._s(t.localUserData.followingCount)+" 個")]),t._v("跟隨中")])],1),e("div",{staticClass:"follows-count"},[e("router-link",{attrs:{to:"/userprofile/"+t.localUserData.id+"/followers"}},[e("span",[t._v(t._s(t.localUserData.followerCount)+" 位")]),t._v("跟隨者")])],1)])]),void 0!==t.userData.id?[t.currentUser.id===t.localUserData.id?e("button",{staticClass:"btn btn-edit-user",on:{click:function(e){return t.showModal("#edit-user-modal")}}},[t._v(" 編輯個人資料 ")]):e("div",{staticClass:"btnPanel"},[e("div",[e("button",{staticClass:"btn message",on:{click:function(e){return t.showModal("#messageModal")}}},[e("img",{attrs:{src:r("8d81"),alt:""}})])]),e("div",[t.localUserData.isSubscribed?e("button",{staticClass:"btn subscribed",attrs:{disabled:t.isProcessing},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.deleteSubscribe(t.localUserData)}}},[e("img",{attrs:{src:r("3157"),alt:""}})]):e("button",{staticClass:"btn subscribe",attrs:{disabled:t.isProcessing},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.addSubscribe(t.localUserData)}}},[e("img",{attrs:{src:r("5fa0"),alt:""}})])]),e("div",[t.localUserData.isFollowed?e("button",{staticClass:"btn isFollowing",attrs:{disabled:t.isProcessing},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.unfollowUser(t.localUserData)}}},[t._v(" 正在跟隨 ")]):e("button",{staticClass:"btn follow",attrs:{disabled:t.isProcessing},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.followUser(t.localUserData)}}},[t._v(" 跟隨 ")])])]),e("UserEditModal",{attrs:{userData:t.localUserData},on:{afterSaveSetting:t.afterSaveSetting}}),e("MessageModal",{attrs:{userData:t.userData}})]:t._e()],2)])},[],!1,null,"a84eee0a",null));t.a=s.exports},"795a":function(e,t,r){"use strict";r("3ad0")},"7db0":function(e,t,r){"use strict";var a=r("23e7"),s=r("b727").find,n=r("44d2"),r="find",i=!0;r in[]&&Array(1)[r](function(){i=!1}),a({target:"Array",proto:!0,forced:i},{find:function(e){return s(this,e,1<arguments.length?arguments[1]:void 0)}}),n(r)},"7e6a":function(e,t,r){},8914:function(e,t,r){},"8d81":function(e,t,r){e.exports=r.p+"img/btn_message.9a07c8af.svg"},"92e8":function(e,t,r){"use strict";var a=r("5530"),s=r("2f62"),s={name:"UserProfileNavtabs",props:{userData:{type:Object,required:!0}},computed:Object(a.a)({},Object(s.b)(["currentUser"]))},r=(r("795a"),r("2877")),s=Object(r.a)(s,function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("ul",{staticClass:"nav nav-tabs"},[t("li",{staticClass:"nav-item"},[t("router-link",{staticClass:"nav-link",attrs:{to:{name:"user-profile",params:{id:e.userData.id}}}},[e._v(" 推文 ")])],1),t("li",{staticClass:"nav-item"},[t("router-link",{staticClass:"nav-link",attrs:{to:{name:"user-profile-replies",params:{id:e.userData.id}}}},[e._v(" 推文與回覆 ")])],1),t("li",{staticClass:"nav-item"},[t("router-link",{staticClass:"nav-link",attrs:{to:{name:"user-profile-Likes",params:{id:e.userData.id}}}},[e._v(" 喜歡的內容 ")])],1)])},[],!1,null,"e67f4e60",null);t.a=s.exports},9861:function(e,t,r){"use strict";r("e260");function s(t){try{return decodeURIComponent(t)}catch(e){return t}}function n(e){var t,r=e.replace(q," "),a=4;try{return decodeURIComponent(r)}catch(e){for(;a;)r=r.replace((t=a--,M[t-1]||(M[t-1]=RegExp("((?:%[\\da-f]{2}){"+t+"})","gi"))),s);return r}}function a(e){return E[e]}function i(e){return encodeURIComponent(e).replace(O,a)}function l(e,t){if(t)for(var r,a=t.split("&"),s=0;s<a.length;)(r=a[s++]).length&&(r=r.split("="),e.push({key:n(r.shift()),value:n(r.join("="))}))}function f(e){this.entries.length=0,l(this.entries,e)}function u(e,t){if(e<t)throw TypeError("Not enough arguments")}var o=r("23e7"),c=r("d066"),h=r("0d3b"),d=r("6eeb"),p=r("e2cc"),m=r("d44e"),v=r("9ed3"),g=r("69f3"),b=r("19aa"),w=r("5135"),U=r("0366"),y=r("f5df"),k=r("825a"),C=r("861d"),D=r("7c73"),R=r("5c6c"),x=r("9a1f"),P=r("35a1"),r=r("b622"),S=c("fetch"),_=c("Headers"),r=r("iterator"),L="URLSearchParams",I=L+"Iterator",j=g.set,A=g.getterFor(L),F=g.getterFor(I),q=/\+/g,M=Array(4),O=/[!'()~]|%20/g,E={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},$=v(function(e,t){j(this,{type:I,iterator:x(A(e).entries),kind:t})},"Iterator",function(){var e=F(this),t=e.kind,r=e.iterator.next(),e=r.value;return r.done||(r.value="keys"===t?e.key:"values"===t?e.value:[e.key,e.value]),r}),B=function(){b(this,B,L);var e,t,r,a,s,n,i,o,c=0<arguments.length?arguments[0]:void 0,u=[];if(j(this,{type:L,entries:u,updateURL:function(){},updateSearchParams:f}),void 0!==c)if(C(c))if("function"==typeof(e=P(c)))for(r=(t=e.call(c)).next;!(n=r.call(t)).done;){if((n=(s=(a=x(k(n.value))).next).call(a)).done||(i=s.call(a)).done||!s.call(a).done)throw TypeError("Expected sequence with length 2");u.push({key:n.value+"",value:i.value+""})}else for(o in c)w(c,o)&&u.push({key:o,value:c[o]+""});else l(u,"string"==typeof c?"?"===c.charAt(0)?c.slice(1):c:c+"")},v=B.prototype;p(v,{append:function(e,t){u(arguments.length,2);var r=A(this);r.entries.push({key:e+"",value:t+""}),r.updateURL()},delete:function(e){u(arguments.length,1);for(var t=A(this),r=t.entries,a=e+"",s=0;s<r.length;)r[s].key===a?r.splice(s,1):s++;t.updateURL()},get:function(e){u(arguments.length,1);for(var t=A(this).entries,r=e+"",a=0;a<t.length;a++)if(t[a].key===r)return t[a].value;return null},getAll:function(e){u(arguments.length,1);for(var t=A(this).entries,r=e+"",a=[],s=0;s<t.length;s++)t[s].key===r&&a.push(t[s].value);return a},has:function(e){u(arguments.length,1);for(var t=A(this).entries,r=e+"",a=0;a<t.length;)if(t[a++].key===r)return!0;return!1},set:function(e,t){u(arguments.length,1);for(var r,a=A(this),s=a.entries,n=!1,i=e+"",o=t+"",c=0;c<s.length;c++)(r=s[c]).key===i&&(n?s.splice(c--,1):(n=!0,r.value=o));n||s.push({key:i,value:o}),a.updateURL()},sort:function(){for(var e,t,r=A(this),a=r.entries,s=a.slice(),n=a.length=0;n<s.length;n++){for(e=s[n],t=0;t<n;t++)if(a[t].key>e.key){a.splice(t,0,e);break}t===n&&a.push(e)}r.updateURL()},forEach:function(e){for(var t,r=A(this).entries,a=U(e,1<arguments.length?arguments[1]:void 0,3),s=0;s<r.length;)a((t=r[s++]).value,t.key,this)},keys:function(){return new $(this,"keys")},values:function(){return new $(this,"values")},entries:function(){return new $(this,"entries")}},{enumerable:!0}),d(v,r,v.entries),d(v,"toString",function(){for(var e,t=A(this).entries,r=[],a=0;a<t.length;)e=t[a++],r.push(i(e.key)+"="+i(e.value));return r.join("&")},{enumerable:!0}),m(B,L),o({global:!0,forced:!h},{URLSearchParams:B}),h||"function"!=typeof S||"function"!=typeof _||o({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,r,a=[e];return 1<arguments.length&&(C(t=arguments[1])&&(r=t.body,y(r)===L&&((e=t.headers?new _(t.headers):new _).has("content-type")||e.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=D(t,{body:R(0,String(r)),headers:R(0,e)}))),a.push(t)),S.apply(this,a)}}),e.exports={URLSearchParams:B,getState:A}},"9a1f":function(e,t,r){var a=r("825a"),s=r("35a1");e.exports=function(e){var t=s(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return a(t.call(e))}},"9bdd":function(e,t,r){var s=r("825a"),n=r("2a62");e.exports=function(t,e,r,a){try{return a?e(s(r)[0],r[1]):e(r)}catch(e){throw n(t),e}}},b66c:function(e,t,r){e.exports=r.p+"img/lastPage.7110cc7e.svg"},c848:function(e,t,r){e.exports=r.p+"img/deletePhoto.206c5b7f.svg"},f16e:function(e,t,r){e.exports=r.p+"img/uploadPhoto.bb257b46.svg"}}]);