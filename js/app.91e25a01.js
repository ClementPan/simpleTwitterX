!function(c){function t(t){for(var e,n,s=t[0],a=t[1],r=t[2],i=0,o=[];i<s.length;i++)n=s[i],Object.prototype.hasOwnProperty.call(f,n)&&f[n]&&o.push(f[n][0]),f[n]=0;for(e in a)Object.prototype.hasOwnProperty.call(a,e)&&(c[e]=a[e]);for(p&&p(t);o.length;)o.shift()();return l.push.apply(l,r||[]),u()}function u(){for(var t,e=0;e<l.length;e++){for(var n=l[e],s=!0,a=1;a<n.length;a++){var r=n[a];0!==f[r]&&(s=!1)}s&&(l.splice(e--,1),t=m(m.s=n[0]))}return t}var n={},d={app:0},f={app:0},l=[];function m(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return c[t].call(e.exports,e,e.exports,m),e.l=!0,e.exports}m.e=function(l){var t=[];d[l]?t.push(d[l]):0!==d[l]&&{"chunk-0805d522":1,"chunk-72e25456":1,"chunk-85796188":1,"chunk-9b8d9a98":1,"chunk-101578b4":1,"chunk-2ddc7857":1,"chunk-43b0f4ed":1,"chunk-4a2d9787":1,"chunk-4fc785b7":1,"chunk-50f6107d":1,"chunk-62a5c27f":1,"chunk-7dfb09f9":1,"chunk-9c15aa06":1,"chunk-e9787968":1,"chunk-ef721bfc":1}[l]&&t.push(d[l]=new Promise(function(t,n){for(var e="css/"+({}[l]||l)+"."+{"chunk-0805d522":"5709d40b","chunk-72e25456":"5ba03781","chunk-85796188":"137e18fc","chunk-9b8d9a98":"1b1cc262","chunk-101578b4":"eb620f8e","chunk-2ddc7857":"aef540e0","chunk-43b0f4ed":"e27958ff","chunk-4a2d9787":"76cf100d","chunk-4fc785b7":"d87a5336","chunk-50f6107d":"585ec191","chunk-62a5c27f":"387587c1","chunk-7dfb09f9":"7542bbc9","chunk-9c15aa06":"0d1518c9","chunk-e9787968":"df47f071","chunk-ef721bfc":"19d9f3cf"}[l]+".css",s=m.p+e,a=document.getElementsByTagName("link"),r=0;r<a.length;r++){var i=a[r],o=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(o===e||o===s))return t()}for(var c=document.getElementsByTagName("style"),r=0;r<c.length;r++)if((o=(i=c[r]).getAttribute("data-href"))===e||o===s)return t();var u=document.createElement("link");u.rel="stylesheet",u.type="text/css",u.onload=t,u.onerror=function(t){var e=t&&t.target&&t.target.src||s,t=new Error("Loading CSS chunk "+l+" failed.\n("+e+")");t.code="CSS_CHUNK_LOAD_FAILED",t.request=e,delete d[l],u.parentNode.removeChild(u),n(t)},u.href=s,document.getElementsByTagName("head")[0].appendChild(u)}).then(function(){d[l]=0}));var s,a,e,r,n,i=f[l];return 0!==i&&(i?t.push(i[2]):(n=new Promise(function(t,e){i=f[l]=[t,e]}),t.push(i[2]=n),(s=document.createElement("script")).charset="utf-8",s.timeout=120,m.nc&&s.setAttribute("nonce",m.nc),s.src=m.p+"js/"+({}[n=l]||n)+"."+{"chunk-0805d522":"3cc73ca2","chunk-72e25456":"5ac34227","chunk-85796188":"d19bcc83","chunk-9b8d9a98":"9b5b074f","chunk-101578b4":"122600f9","chunk-2ddc7857":"2b267441","chunk-43b0f4ed":"2abd0ed5","chunk-4a2d9787":"32c0c8c0","chunk-4fc785b7":"06d5b856","chunk-50f6107d":"2517651e","chunk-62a5c27f":"63a42955","chunk-7dfb09f9":"9e79fa17","chunk-9c15aa06":"3be6ec41","chunk-e9787968":"7e6bf726","chunk-ef721bfc":"e97770c9"}[n]+".js",a=new Error,e=function(t){s.onerror=s.onload=null,clearTimeout(r);var e,n=f[l];0!==n&&(n&&(e=t&&("load"===t.type?"missing":t.type),t=t&&t.target&&t.target.src,a.message="Loading chunk "+l+" failed.\n("+e+": "+t+")",a.name="ChunkLoadError",a.type=e,a.request=t,n[1](a)),f[l]=void 0)},r=setTimeout(function(){e({type:"timeout",target:s})},12e4),s.onerror=s.onload=e,document.head.appendChild(s))),Promise.all(t)},m.m=c,m.c=n,m.d=function(t,e,n){m.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},m.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},m.t=function(e,t){if(1&t&&(e=m(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(m.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)m.d(n,s,function(t){return e[t]}.bind(null,s));return n},m.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return m.d(e,"a",e),e},m.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},m.p="",m.oe=function(t){throw t};var e=(s=window.webpackJsonp=window.webpackJsonp||[]).push.bind(s);s.push=t;for(var s=s.slice(),a=0;a<s.length;a++)t(s[a]);var p=e;l.push([0,"chunk-vendors"]),u()}({0:function(t,e,n){t.exports=n("56d7")},"05fa":function(t,e,n){},"0c38":function(t,e,n){},"10d1":function(t,e,n){t.exports=n.p+"img/home.52b5f7af.svg"},"12b0":function(t,e,n){"use strict";n("9072")},"141a":function(t,e,n){"use strict";var s=[function(){var t=this.$createElement,t=this._self._c||t;return t("span",{attrs:{"aria-hidden":"true"}},[t("img",{attrs:{src:n("27ae"),alt:""}})])}],a=n("5530"),o=n("1da1"),c=(n("96cf"),n("b0c0"),n("2fa3")),r=n("2708"),i=n("2f62"),u=n("6783"),l=n("1157"),d=n.n(l),a={name:"TweetReplyModal",mixins:[r.a,r.c],props:{tweet:{type:Object,default:function(){return{user:{avatar:"",name:"",account:""}}}}},data:function(){return{replyContent:"",isProcessing:!1}},methods:{clearReplyContent:function(){this.replyContent=""},createReply:function(r){var i=this;return Object(o.a)(regeneratorRuntime.mark(function t(){var e,n,s,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i.replyContentCheck(i.replyContent)){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,i.isProcessing=!0,e={comment:i.replyContent},t.next=8,u.a.createReply(r,e);case 8:if(s=t.sent,a=s.data,n=a.ReplyId,s=n,"success"!==a.status)throw new Error(a.message);t.next=14;break;case 14:a=i.$route.params.id,i.$socket.emit("reply",{userId:a,replyId:n,reply:i.replyContent,currentUserId:i.currentUser.id}),c.a.fire({icon:"success",title:"回覆成功！"}),d()("#tweetReplyModal-".concat(r)).modal("hide"),a={tweetId:r,name:i.currentUser.name,UserId:i.currentUser.id,account:i.currentUser.account,avatar:i.currentUser.avatar,comment:i.replyContent,createdAt:new Date,id:s},i.$bus.$emit("afterCreateReply",a),i.clearReplyContent(),i.isProcessing=!1,t.next=31;break;case 26:t.prev=26,t.t0=t.catch(3),i.isProcessing=!1,c.a.fire({icon:"error",title:"無法回復推文，請稍後再試！"});case 31:case"end":return t.stop()}},t,null,[[3,26]])}))()},replyContentCheck:function(t){return t?!(140<t.length&&(c.a.fire({icon:"error",title:"回覆字數不得超過 140 個字！"}),1)):(c.a.fire({icon:"error",title:"尚未輸入回覆內容！"}),!1)},closeModal:function(t){t=document.querySelector("#tweetReplyModal-".concat(t));t.classList.remove("show"),t.setAttribute("aria-hidden","true"),t.setAttribute("style","display: none");t=document.getElementsByClassName("modal-backdrop");document.body.removeChild(t[0])}},computed:Object(a.a)({},Object(i.b)(["currentUser"]))},i=(n("d2b8"),n("2877")),s=Object(i.a)(a,function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("div",{staticClass:"modal fade",attrs:{id:"tweetReplyModal-"+e.tweet.id,tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[t("button",{staticClass:"start btn",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"},on:{click:e.clearReplyContent}},[e._m(0)])]),t("div",{staticClass:"modal-body"},[t("div",{staticClass:"container replyTarget"},[t("div",{staticClass:"avatar"},[e.tweet.user?t("img",{attrs:{src:e.tweet.user.avatar,alt:""}}):t("img",{attrs:{src:e._f("emptyImageFilter")(""),alt:""}})]),t("div",{staticClass:"tweetInfo"},[t("div",{staticClass:"userInfo"},[t("p",{staticClass:"userName"},[e._v(" "+e._s(e.tweet.user?e.tweet.user.name:"")+" ")]),t("p",{staticClass:"userAccount"},[e._v(" @"+e._s(e.tweet.user?e.tweet.user.account:"")+" ")]),t("span",{staticClass:"mx-1"},[e._v("·")]),t("p",{staticClass:"tweetUpdateAt"},[e._v(" "+e._s(e._f("fromNow")(e.tweet.updatedAt))+" ")])]),t("div",{staticClass:"tweetContent"},[t("p",[e._v(e._s(e.tweet.description))])]),t("div",{staticClass:"panel"},[t("p",[e._v(" 回覆給 "),t("span",[e._v(" @ "+e._s(e.tweet.user?e.tweet.user.name:"")+" ")])])])])]),t("div",{staticClass:"container myReply"},[t("div",{staticClass:"avatar"},[t("img",{attrs:{src:e._f("emptyImageFilter")(e.currentUser.avatar),alt:""}})]),t("div",{staticClass:"tweetInf"},[t("div",{staticClass:"input"},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.replyContent,expression:"replyContent"}],attrs:{id:"",name:"",cols:"55",rows:"5",autofocus:"",maxlength:"140",required:"",placeholder:"推你的回覆 (字數限制 140 字元)"},domProps:{value:e.replyContent},on:{input:function(t){t.target.composing||(e.replyContent=t.target.value)}}})])])])]),t("div",{staticClass:"modal-footer"},[t("div",{staticClass:"tweetButton"},[t("button",{staticClass:"btn",attrs:{type:"button",disabled:e.isProcessing},on:{click:function(t){return e.createReply(e.tweet.id)}}},[e._v(" "+e._s(e.isProcessing?"回覆中..":"回覆")+" ")])])])])])])},s,!1,null,"a660268c",null);e.a=s.exports},1881:function(t,e,n){t.exports=n.p+"img/likedLikeCount.e33c3ed5.svg"},"1a13":function(t,e,n){"use strict";n("2e42")},2708:function(t,e,n){"use strict";n.d(e,"c",function(){return a}),n.d(e,"b",function(){return r}),n.d(e,"a",function(){return i});var e=n("c1df"),s=n.n(e),a={filters:{fromNow:function(t){return s.a.locale("zh-tw"),t?s()(t).fromNow():"-"}}},r={filters:{exactDate:function(t){return s.a.locale("zh-tw"),t?s()(t).format("a h:mm ⋅ YYYY年M月Do"):"-"}}},i={filters:{emptyImageFilter:function(t){return t||"https://via.placeholder.com/1000x1000/ccc/fff"}}}},"27ae":function(t,e,n){t.exports=n.p+"img/close.48ce53bb.svg"},"2e42":function(t,e,n){},"2fa3":function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return r}),n("d3b7");var s=n("bc3a"),e=n.n(s),s=n("3d20"),s=n.n(s),e=e.a.create({baseURL:"https://simple-twitter-api-2021.herokuapp.com/api"});e.interceptors.request.use(function(t){var e=localStorage.getItem("token");return e&&(t.headers.Authorization="Bearer ".concat(e)),t},function(t){Promise.reject(t)});var a=e,r=s.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:5e3})},"341c":function(t,e,n){t.exports=n.p+"img/atNoti.ba841650.svg"},"390e":function(t,e,n){},"459f":function(t,e,n){t.exports=n.p+"img/atHome.cb72db0b.svg"},4678:function(t,e,n){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function a(t){t=r(t);return n(t)}function r(t){if(n.o(s,t))return s[t];t=new Error("Cannot find module '"+t+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return Object.keys(s)},a.resolve=r,(t.exports=a).id="4678"},4937:function(t,e,n){"use strict";n("0c38")},"4c24":function(t,e,n){},"4c9a":function(t,e,n){t.exports=n.p+"img/profile.49216c55.svg"},"4cce":function(t,e,n){"use strict";var s=n("2fa3");e.a={putUser:function(t,e){return s.b.put("/users/".concat(t),e)},getUser:function(t){return s.b.get("/users/".concat(t))},getCurrentUser:function(){return s.b.get("/users/current_user")},getTotalUser:function(){return s.b.get("/admin/users")},setUser:function(t){return s.b.post("/users",t)},getRecommendedFollowers:function(){return s.b.get("/users")},getUserFollowers:function(t){return s.b.get("/users/".concat(t,"/followers"))},getUserFollowings:function(t){return s.b.get("/users/".concat(t,"/followings"))},followUser:function(t){return s.b.post("/users/".concat(t,"/followships"))},unfollowUser:function(t){return s.b.delete("/users/".concat(t,"/followships"))},subscribeUser:function(t){return s.b.post("/users/".concat(t,"/subscriptions"))},unsubscribeUser:function(t){return s.b.delete("/users/".concat(t,"/subscriptions"))}}},"4dfd":function(t,e,n){"use strict";var a=n("1da1"),r=n("5530"),i=(n("96cf"),n("b0c0"),n("2fa3")),o=n("7696"),c=n("4cce"),s=n("2f62"),s={name:"AccountEditForm",props:{isSignUp:{type:Boolean,default:!0}},created:function(){this.fetchCurrentUser(this.currentUser)},data:function(){return{form:{name:"",account:"",email:"",password:"",checkPassword:""},isProcessing:!1,isSaved:!0,userChanged:!1,inputCheck:{account:!0,name:!0,email:!0,password:!0,checkPassword:!0}}},methods:{fetchCurrentUser:function(t){var e=t.name,n=t.email,t=t.account;this.form=Object(r.a)(Object(r.a)({},this.form),{},{name:e,email:n,account:t})},goBackToSignIn:function(){this.$router.push("/signin")},handleSubmit:function(t){if(!this.formDataCheck())return this.isProcessing=!1;this.isSignUp?this.handleSignUpSubmit(t):this.handleSaveSetting(t)},formDataCheck:function(){return this.form.account?50<this.form.account.length?(i.a.fire({icon:"info",title:"帳號長度不得大於 50 個字元！"}),this.inputCheck.account=!1):this.form.name?this.form.name?this.form.email?this.form.password?12<this.form.password.length||this.form.password.length<4?(i.a.fire({icon:"info",title:"密碼長度不得小於 4 或超過 12！"}),this.inputCheck.password=!1):this.form.checkPassword?this.form.password===this.form.checkPassword||(i.a.fire({icon:"error",title:"密碼不相符！"}),!1):(i.a.fire({icon:"info",title:"請填寫密碼確認！"}),this.inputCheck.checkPassword=!1):(i.a.fire({icon:"info",title:"請填寫密碼！"}),this.inputCheck.password=!1):(i.a.fire({icon:"info",title:"請填寫 Email！"}),this.inputCheck.email=!1):(i.a.fire({icon:"info",title:"名稱長度不得大於 50 個字元！"}),this.inputCheck.name=!1):(i.a.fire({icon:"info",title:"請填寫名稱！"}),this.inputCheck.name=!1):(i.a.fire({icon:"info",title:"請填寫帳號！"}),this.inputCheck.account=!1)},handleSignUpSubmit:function(){var s=this;return Object(a.a)(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s.formDataCheck()){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,s.isProcessing=!0,e=s.form,t.next=8,o.a.signUp(e);case 8:if(n=t.sent,"success"!==(n=n.data).status)throw new Error(n);t.next=12;break;case 12:i.a.fire({icon:"success",title:"註冊成功！"}),s.$router.push("signin"),t.next=23;break;case 16:t.prev=16,t.t0=t.catch(3),n="無法註冊，請稍後再試！",409===t.t0.response.status&&(n="該 Email 已被註冊，請選擇其他 Email！"),s.isProcessing=!1,i.a.fire({icon:"error",title:n});case 23:case"end":return t.stop()}},t,null,[[3,16]])}))()},handleSaveSetting:function(){var s=this;return Object(a.a)(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s.formDataCheck()){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,s.isProcessing=!0,e=s.currentUser.id,n=Object(r.a)(Object(r.a)({},s.form),{},{page:"setting"}),t.next=9,c.a.putUser(e,n);case 9:if(n=t.sent,"success"!==(n=n.data).status)throw new Error(n.message);t.next=14;break;case 14:i.a.fire({icon:"success",title:"資料修改成功！"}),s.isProcessing=!1,s.isSaved=!0,s.userChanged=!0,s.form.password="",s.form.checkPassword="",t.next=27;break;case 22:t.prev=22,t.t0=t.catch(3),s.isProcessing=!1,i.a.fire({icon:"error",title:"無法變更使用者資訊，請稍候再試！"});case 27:case"end":return t.stop()}},t,null,[[3,22]])}))()}},watch:{currentUser:function(t){this.fetchCurrentUser(t)},form:{handler:function(){if(!this.userChanged)return this.userChanged=!0;this.isSaved=!1},deep:!0}},computed:Object(r.a)({},Object(s.b)(["currentUser"]))},n=(n("981e"),n("2877")),s=Object(n.a)(s,function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("form",{on:{submit:function(t){return t.preventDefault(),t.stopPropagation(),e.handleSubmit(t)}}},[t("div",{staticClass:"row"},[t("label",{attrs:{for:"account"}},[e._v("帳號"),e.inputCheck.account?e._e():t("span",{staticClass:"note ml-5"},[e._v("*帳號長度不得大於 50 字元")])]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.account,expression:"form.account"}],attrs:{id:"account",name:"account",type:"text",required:"",maxlength:"50"},domProps:{value:e.form.account},on:{input:function(t){t.target.composing||e.$set(e.form,"account",t.target.value)}}})]),t("div",{staticClass:"row"},[t("label",{attrs:{for:"name"}},[e._v("名稱"),e.inputCheck.name?e._e():t("span",{staticClass:"note ml-5"},[e._v("*名稱長度不得大於 50 字元")])]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.name,expression:"form.name"}],attrs:{id:"name",name:"name",type:"text",maxlength:"50",required:""},domProps:{value:e.form.name},on:{input:function(t){t.target.composing||e.$set(e.form,"name",t.target.value)}}})]),t("div",{staticClass:"row"},[t("label",{attrs:{for:"email"}},[e._v("Email"),e.inputCheck.email?e._e():t("span",{staticClass:"note ml-5"},[e._v("*信箱長度不得大於 50 字元")])]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.email,expression:"form.email"}],attrs:{id:"email",name:"email",type:"email",maxlength:"50",required:""},domProps:{value:e.form.email},on:{input:function(t){t.target.composing||e.$set(e.form,"email",t.target.value)}}})]),t("div",{staticClass:"row"},[t("label",{attrs:{for:"password"}},[e._v("密碼"),e.inputCheck.password?e._e():t("span",{staticClass:"note ml-5"},[e._v("*密碼長度需介於 4 和 12 之間")])]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.password,expression:"form.password"}],attrs:{id:"password",name:"password",type:"password",required:"",maxLength:"12"},domProps:{value:e.form.password},on:{input:function(t){t.target.composing||e.$set(e.form,"password",t.target.value)}}})]),t("div",{staticClass:"row"},[t("label",{attrs:{for:"passwordCheck"}},[e._v("密碼確認"),e.inputCheck.checkPassword?e._e():t("span",{staticClass:"note ml-3"},[e._v("*密碼長度需介於 4 和 12 之間")])]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.checkPassword,expression:"form.checkPassword"}],attrs:{id:"passwordCheck",name:"passwordCheck",type:"password",maxLength:"12",required:""},domProps:{value:e.form.checkPassword},on:{input:function(t){t.target.composing||e.$set(e.form,"checkPassword",t.target.value)}}})]),e.isSignUp?[t("div",{staticClass:"row mt-4"},[t("button",{staticClass:"btn submit",attrs:{type:"submit",disabled:e.isProcessing}},[e._v(" "+e._s(e.isProcessing?"註冊中..":"註冊")+" ")])]),t("div",{staticClass:"row"},[t("button",{staticClass:"btn cancel",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.goBackToSignIn(t)}}},[e._v(" 取消 ")])])]:[t("div",{staticClass:"row"},[e.isSaved?t("button",{staticClass:"btn update",attrs:{disabled:""}},[e._v("已儲存")]):t("button",{staticClass:"btn update",attrs:{type:"submit",disabled:e.isProcessing}},[e._v(" "+e._s(e.isProcessing?"儲存中..":"儲存")+" ")])])]],2)},[],!1,null,"6abcc760",null);e.a=s.exports},"4ee2":function(t,e,n){},"54c2":function(t,e,n){"use strict";n("05fa")},"56d7":function(t,e,n){"use strict";n.r(e),n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("2b0e"),a=n("5530"),r=(n("b0c0"),n("ab8b"),n("4989"),n("2f62")),i={name:"App",created:function(){var e=this;this.$bus.$on("updateSession",function(t){e.updateSession(t)})},sockets:{"set session":function(t){sessionStorage.setItem("rooms",JSON.stringify(t))}},methods:{startSession:function(){var t=localStorage.getItem("token");t&&((t=JSON.parse(sessionStorage.getItem("rooms")))?this.$socket.emit("start session",t,this.currentUser.id):this.$socket.emit("start session",{rooms:null},this.currentUser.id))},updateSession:function(t){var e=this.currentUser,n=e.name,e=e.id,t=["# ".concat(n),"self ".concat(e),"".concat(t)];this.$socket.emit("start session",t,this.currentUser.id),sessionStorage.setItem("rooms",JSON.stringify(t))}},watch:{currentUser:{deep:!0,handler:function(){this.startSession()}}},computed:Object(a.a)({},Object(r.b)(["currentUser"]))},o=(n("e409"),n("2877")),c=Object(o.a)(i,function(){var t=this.$createElement,t=this._self._c||t;return t("div",{attrs:{id:"simple-twitter"}},[t("router-view")],1)},[],!1,null,"520ba164",null).exports,l=n("1da1"),u=(n("96cf"),n("d3b7"),n("3ca3"),n("ddb0"),n("caad"),n("2532"),n("8c4f")),d=(n("d81d"),n("c8e4")),f=n("999e"),m=n("bb7a"),e={name:"CreateTweet",mixins:[n("2708").a],components:{CreateTweetModal:m.a},created:function(){this.fetchCurrentUser()},data:function(){return{user:{},tweetContent:"",isProcessing:!1}},methods:{fetchCurrentUser:function(){this.user=this.currentUser}},computed:Object(a.a)({},Object(r.b)(["currentUser"]))},i=(n("be23"),Object(o.a)(e,function(){var t=this,e=t.$createElement,e=t._self._c||e;return e("div",{staticClass:"createTweet"},[e("div",{staticClass:"container"},[e("div",{staticClass:"avatar"},[e("img",{attrs:{src:t._f("emptyImageFilter")(t.user.avatar),alt:""}})]),t._m(0)]),t._m(1),e("CreateTweetModal",{attrs:{user:t.user}})],1)},[function(){var t=this.$createElement,t=this._self._c||t;return t("div",{staticClass:"textInput"},[t("p",{attrs:{"data-toggle":"modal","data-target":"#tweetModal"}},[this._v("有什麼新鮮事？")])])},function(){var t=this.$createElement,t=this._self._c||t;return t("div",{staticClass:"tweetButton"},[t("button",{staticClass:"btn",attrs:{type:"button","data-toggle":"modal","data-target":"#tweetModal"}},[this._v(" 推文 ")])])}],!1,null,"711020c8",null)).exports,m=(n("4de4"),n("da7c")),e={name:"FollowingUsersTweets",props:{tweets:{type:Array,required:!0}},created:function(){this.localTweets=this.tweets},components:{TweetItem:m.a},data:function(){return{localTweets:[]}},methods:{afterDeleteTweet:function(e){this.localTweets=this.localTweets.filter(function(t){return t.id!==e})}},watch:{tweets:function(t){this.localTweets=t}}},m=(n("7e55"),Object(o.a)(e,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("ul",{staticClass:"tweetList"},e._l(e.localTweets,function(t){return n("TweetItem",{key:t.id,attrs:{tweet:t},on:{afterDeleteTweet:e.afterDeleteTweet}})}),1)])},[],!1,null,"7225840a",null)).exports,p=n("2fa3"),b=n("6783"),e=n("b572"),d={name:"Main",components:{UserSidebar:d.a,RecommendedFollowers:f.a,CreateTweet:i,FollowingUsersTweets:m,Spinner:e.a},created:function(){var e=this;this.fetchTweets(),this.$bus.$on("afterCreateReply",function(t){e.afterCreateReply(t)}),this.$bus.$on("afterCreateTweet",function(t){e.afterCreateTweet(t)})},data:function(){return{tweets:[],tweet:{UserId:void 0,created:"",description:"",id:void 0,likeCount:0,replyCount:0,updatedAt:"",user:{account:"",name:"",avatar:""},isLiked:!1}}},methods:{fetchTweets:function(){var n=this;return Object(l.a)(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.a.getAllFollowedTweets();case 3:e=t.sent,e=e.data,n.tweets=e,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),p.a.fire({icon:"error",title:"無法取得推文，請稍後再試！"});case 11:case"end":return t.stop()}},t,null,[[0,8]])}))()},afterCreateTweet:function(t){this.tweets.unshift(Object(a.a)(Object(a.a)({},this.tweet),t))},afterToggleLike:function(e){this.tweets=this.tweets.map(function(t){return t.id===e.id?Object(a.a)(Object(a.a)({},t),{},{isLiked:e.isLiked}):t})},afterCreateReply:function(t){var e=t.tweetId;this.tweets=this.tweets.map(function(t){return t.id!==e?Object(a.a)({},t):Object(a.a)(Object(a.a)({},t),{},{replyCount:t.replyCount+1})})}}},f=(n("8265"),Object(o.a)(d,function(){var t=this,e=t.$createElement,e=t._self._c||e;return e("div",{staticClass:"main flex"},[e("UserSidebar"),e("div",{staticClass:"mainSection"},[t._m(0),e("CreateTweet"),t.tweets.length?e("FollowingUsersTweets",{attrs:{tweets:t.tweets},on:{afterToggleLike:t.afterToggleLike}}):e("Spinner")],1),e("RecommendedFollowers")],1)},[function(){var t=this.$createElement,t=this._self._c||t;return t("div",{staticClass:"title stickyTitle"},[t("h1",[this._v("首頁")])])}],!1,null,"3cf955a2",null)).exports,i=[function(){var t=this.$createElement,t=this._self._c||t;return t("div",{staticClass:"logo"},[t("img",{attrs:{src:n("a1d8"),alt:""}})])},function(){var t=this.$createElement,t=this._self._c||t;return t("div",{staticClass:"title"},[t("h1",[this._v("建立你的帳號")])])}],m={name:"sign-up",components:{AccountEditForm:n("4dfd").a},data:function(){return{isSignUp:!0}}},e=(n("8d24"),Object(o.a)(m,function(){var t=this,e=t.$createElement,e=t._self._c||e;return e("div",{staticClass:"container flex"},[t._m(0),t._m(1),e("AccountEditForm",{attrs:{isSignUp:t.isSignUp}})],1)},i,!1,null,"eca52d0c",null)).exports,d=[function(){var t=this.$createElement,t=this._self._c||t;return t("div",{staticClass:"container"},[t("div",{staticClass:"logo"},[t("img",{attrs:{src:n("a1d8"),alt:""}})]),t("h1",[this._v("404 Not Found")])])}],m={name:"NotFound"},i=(n("12b0"),Object(o.a)(m,function(){this.$createElement;return this._self._c,this._m(0)},d,!1,null,"82391ae4",null)).exports,m=[function(){var t=this.$createElement,t=this._self._c||t;return t("div",{staticClass:"logo text-center"},[t("img",{attrs:{src:n("a1d8"),alt:""}})])},function(){var t=this.$createElement,t=this._self._c||t;return t("div",{staticClass:"admin-text text-center mb-4"},[t("h1",{staticClass:"h3 mb-3 font-weight-normal"},[this._v("後台登入")])])}],h=n("7696"),d={name:"AdminSignin",data:function(){return{account:"",password:"",isProcessing:!1}},methods:{handleSubmit:function(){var n=this;return Object(l.a)(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n.account&&n.password){t.next=4;break}return p.a.fire({icon:"warning",title:"請填入帳號和密碼"}),t.abrupt("return");case 4:return n.isProcessing=!0,t.next=7,h.a.signIn({account:n.account,password:n.password});case 7:if(e=t.sent,"success"!==(e=e.data).status)throw new Error(e.message);t.next=12;break;case 12:if("admin"!==e.user.role)return p.a.fire({icon:"warning",title:"您非管理者身分!"}),n.isProcessing=!1,t.abrupt("return");t.next=16;break;case 16:localStorage.setItem("token",e.token),n.$router.push("/admin/tweets"),t.next=25;break;case 20:t.prev=20,t.t0=t.catch(0),n.password="",n.isProcessing=!1,p.a.fire({icon:"warning",title:"請確認您輸入了正確的帳號密碼"});case 25:case"end":return t.stop()}},t,null,[[0,20]])}))()}}},m=(n("5890"),Object(o.a)(d,function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("div",{staticClass:"container py-5"},[t("form",{staticClass:"w-100",on:{submit:function(t){return t.preventDefault(),t.stopPropagation(),e.handleSubmit(t)}}},[e._m(0),e._m(1),t("div",{staticClass:"form-account form-label-group mb-2"},[t("label",{attrs:{for:"account"}},[e._v("帳號")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.account,expression:"account"}],staticClass:"form-control",attrs:{id:"account",name:"account",type:"text",autocomplete:"useraccount",required:"",autofocus:""},domProps:{value:e.account},on:{input:function(t){t.target.composing||(e.account=t.target.value)}}})]),t("div",{staticClass:"form-password form-label-group mb-3"},[t("label",{attrs:{for:"password"}},[e._v("密碼")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",attrs:{id:"password",name:"password",type:"password",autocomplete:"current-password",required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),t("button",{staticClass:"btn btn-lg btn-primary btn-block mb-3",attrs:{type:"submit",disabled:e.isProcessing}},[e._v(" 登入 ")]),t("div",{staticClass:"sign-in text-center mb-3"},[t("p",[t("router-link",{attrs:{to:"/signin"}},[e._v("前台登入")])],1)])])])},m,!1,null,"5cc5ae45",null)).exports,v=n("4cce");s.a.use(r.a);var w=new r.a.Store({state:{currentUser:{account:"",avatar:"",cover:"",email:"",id:void 0,introduction:"",name:"",role:"user"},isAuthenticated:!1,token:"",currentRoomId:void 0},mutations:{setCurrentUser:function(t,e){t.currentUser=Object(a.a)(Object(a.a)({},t.currentUser),e),t.isAuthenticated=!0,t.token=localStorage.getItem("token")},revokeAuthentication:function(t){t.currentUser={},t.isAuthenticated=!1,t.token="",localStorage.removeItem("token"),sessionStorage.removeItem("rooms")},setCurrentRoomId:function(t,e){t.currentRoomId=e}},actions:{fetchCurrentUser:function(u){return Object(l.a)(regeneratorRuntime.mark(function t(){var e,n,s,a,r,i,o,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=u.commit,t.prev=1,t.next=4,v.a.getCurrentUser();case 4:if(c=t.sent,"error"===(n=c.data).status)throw new Error(n.message);t.next=8;break;case 8:return s=n.account,a=n.id,r=n.name,i=n.email,o=n.avatar,c=n.role,e("setCurrentUser",{account:s,id:a,name:r,email:i,avatar:o,role:c}),t.abrupt("return",!0);case 13:return t.prev=13,t.t0=t.catch(1),e("revokeAuthentication"),t.abrupt("return",!1);case 18:case"end":return t.stop()}},t,null,[[1,13]])}))()}},modules:{}});s.a.use(u.a);var g,r=function(t,e,n){var s=w.state.currentUser;s&&"admin"!==s.role?n("/404"):n()},m=new u.a({linkExactActiveClass:"active",routes:[{path:"/",name:"root",redirect:"/signin"},{path:"/signup",name:"sign-up",component:e},{path:"/signin",name:"sign-in",component:function(){return n.e("chunk-7dfb09f9").then(n.bind(null,"54e2"))}},{path:"/admin",name:"admin-root",redirect:"/admin/signin"},{path:"/admin/signin",name:"admin-sign-in",component:m},{path:"/main",name:"main",component:f},{path:"/notification/mentions",name:"notification-mentions",component:function(){return n.e("chunk-43b0f4ed").then(n.bind(null,"49e5"))}},{path:"/notification",name:"notification",component:function(){return n.e("chunk-e9787968").then(n.bind(null,"109a"))}},{path:"/publicMessage",name:"publicMessage",component:function(){return n.e("chunk-4a2d9787").then(n.bind(null,"ffce"))}},{path:"/privateMessage",name:"privateMessage",component:function(){return n.e("chunk-9c15aa06").then(n.bind(null,"e39f"))}},{path:"/accountEdit",name:"account-edit",component:function(){return n.e("chunk-ef721bfc").then(n.bind(null,"376a"))}},{path:"/replydetail/:id",name:"reply-detail",component:function(){return n.e("chunk-50f6107d").then(n.bind(null,"54f8"))}},{path:"/userprofile/:id/replies",name:"user-profile-replies",component:function(){return Promise.all([n.e("chunk-0805d522"),n.e("chunk-72e25456")]).then(n.bind(null,"236c"))}},{path:"/userprofile/:id/likes",name:"user-profile-Likes",component:function(){return Promise.all([n.e("chunk-0805d522"),n.e("chunk-85796188")]).then(n.bind(null,"ff96"))}},{path:"/userprofile/:id/followers",name:"user-profile-followers",component:function(){return n.e("chunk-4fc785b7").then(n.bind(null,"369c"))}},{path:"/userprofile/:id/following",name:"user-profile-following",component:function(){return n.e("chunk-101578b4").then(n.bind(null,"cc95"))}},{path:"/userprofile/:id",name:"user-profile",component:function(){return Promise.all([n.e("chunk-0805d522"),n.e("chunk-9b8d9a98")]).then(n.bind(null,"4a39"))}},{path:"/admin/tweets",name:"admin-tweets",component:function(){return n.e("chunk-2ddc7857").then(n.bind(null,"fa6a"))},beforeEnter:r},{path:"/admin/users",name:"admin-users",component:function(){return n.e("chunk-62a5c27f").then(n.bind(null,"6135"))},beforeEnter:r},{path:"*",name:"not-found",component:i}]});m.beforeEach((g=Object(l.a)(regeneratorRuntime.mark(function t(e,n,s){var a,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=localStorage.getItem("token"),i=w.state.token,r=w.state.isAuthenticated,a&&a!==i)return t.next=8,w.dispatch("fetchCurrentUser");t.next=9;break;case 8:r=t.sent;case 9:i=["sign-in","sign-up","admin-sign-in"],r||i.includes(e.name)||s("/signin"),r&&i.includes(e.name)&&s("/main"),s();case 14:case"end":return t.stop()}},t)})),function(t,e,n){return g.apply(this,arguments)}));f=m;n("bb31"),n("4ee2"),n("15f5"),n("7051"),s.a.prototype.$bus=new s.a;r=n("5132"),i=n.n(r),m=n("8e27"),r=n.n(m),m=localStorage.getItem("token"),m=new r.a("https://simple-twitter-api-2021.herokuapp.com/",{reconnectionDelayMax:1e4,auth:{token:m}});s.a.use(new i.a({debug:!0,connection:m,vuex:{store:w,actionPrefix:"SOCKET_",mutationPrefix:"SOCKET_"}})),new s.a({router:f,store:w,render:function(t){return t(c)}}).$mount("#app")},5758:function(t,e,n){t.exports=n.p+"img/noti.1b5d9f0d.svg"},5890:function(t,e,n){"use strict";n("6217")},6217:function(t,e,n){},6569:function(t,e,n){t.exports=n.p+"img/commentCount.d03a1840.svg"},6783:function(t,e,n){"use strict";var s=n("2fa3");e.a={getAllFollowedTweets:function(){return s.b.get("tweets")},createNewTweet:function(t){return s.b.post("/tweets",t)},adminDeleteTweet:function(t){t=t.tweetId;return s.b.delete("/admin/tweets/".concat(t))},getUserTweet:function(t){return s.b.get("/users/".concat(t,"/tweets"))},getUserFollowersTweet:function(t){t=t.userId;return s.b.get("/users/".concat(t,"/followers"))},getTweet:function(t){return s.b.get("/tweets/".concat(t))},getTweetReplies:function(t){return s.b.get("/tweets/".concat(t,"/replies"))},getAllTweetsByUserId:function(t){return s.b.get("/users/".concat(t,"/tweets"))},getAllRepliedTweets:function(t){return s.b.get("/users/".concat(t,"/replied_tweets"))},getAllLikedTweets:function(t){return s.b.get("/users/".concat(t,"/likes"))},createReply:function(t,e){return s.b.post("/tweets/".concat(t,"/replies"),e)},likeTweet:function(t){return s.b.post("/tweets/".concat(t,"/like"))},unlikeTweet:function(t){return s.b.delete("/tweets/".concat(t,"/like"))},putTweet:function(t,e){return s.b.put("/tweets/".concat(t),{description:e})},deleteTweet:function(t){return s.b.delete("/tweets/".concat(t))}}},"6adc":function(t,e,n){t.exports=n.p+"img/likeCount.1cc3606d.svg"},"6d80":function(t,e,n){t.exports=n.p+"img/setting.27a85491.svg"},7696:function(t,e,n){"use strict";var s=n("2fa3");e.a={signIn:function(t){return s.b.post("/users/login",t)},signUp:function(t){return s.b.post("/users",t)}}},"7e55":function(t,e,n){"use strict";n("4c24")},8265:function(t,e,n){"use strict";n("a2f2")},"85f5":function(t,e,n){t.exports=n.p+"img/atSetting.df6893fe.svg"},"89b5":function(t,e,n){},"8d24":function(t,e,n){"use strict";n("a241")},9072:function(t,e,n){},"977e":function(t,e,n){t.exports=n.p+"img/logout.5be7b8df.svg"},"981e":function(t,e,n){"use strict";n("a5e5")},"999e":function(t,e,n){"use strict";var s=n("5530"),a=n("1da1"),r=(n("96cf"),n("4de4"),n("d81d"),n("b572")),i=n("4cce"),o=n("2708"),c=n("2fa3"),u=n("2f62"),u={components:{Spinner:r.a},name:"RecommendedFollowers",mixins:[o.a],created:function(){var e=this;this.fetchRecommendedFollowers(),this.$bus.$on("toggleFollowFromProfileCard",function(t){e.renderAfterFollowToggle(t)})},data:function(){return{recommendedFollowers:[],isLoading:!0,isProcessing:!1}},methods:{fetchRecommendedFollowers:function(){var n=this;return Object(a.a)(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n.isLoading=!0,t.next=4,i.a.getRecommendedFollowers();case 4:e=t.sent,e=e.data,n.recommendedFollowers=e.filter(function(t){return t.id!==n.currentUser.id}),n.isLoading=!1,t.next=15;break;case 10:t.prev=10,t.t0=t.catch(0),n.isLoading=!1,c.a.fire({icon:"error",title:"無法取得推薦追蹤資料，請稍後再試！"});case 15:case"end":return t.stop()}},t,null,[[0,10]])}))()},followUser:function(n){var s=this;return Object(a.a)(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s.isProcessing=!0,e=n.id,t.next=5,i.a.followUser(e);case 5:if(e=t.sent,"success"!==(e=e.data).status)throw new Error(e.message);t.next=9;break;case 9:s.renderAfterFollowToggle(n),s.$bus.$emit("afterFollowUser",n.id),c.a.fire({icon:"success",title:"追蹤成功！"}),s.$socket.emit("follow",{userId:n.id,currentUserId:s.currentUser.id}),s.isProcessing=!1,t.next=21;break;case 16:t.prev=16,t.t0=t.catch(0),s.isProcessing=!1,c.a.fire({icon:"error",title:"無法執行動作，請稍後再試！"});case 21:case"end":return t.stop()}},t,null,[[0,16]])}))()},unfollowUser:function(n){var s=this;return Object(a.a)(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s.isProcessing=!0,t.next=4,i.a.unfollowUser(n.id);case 4:if(e=t.sent,"success"!==(e=e.data).status)throw new Error(e.message);t.next=8;break;case 8:s.renderAfterFollowToggle(n),s.$bus.$emit("afterUnfollowUser",n.id),c.a.fire({icon:"success",title:"取消追蹤成功！"}),s.isProcessing=!1,t.next=19;break;case 14:t.prev=14,t.t0=t.catch(0),s.isProcessing=!1,c.a.fire({icon:"error",title:"無法追蹤，請稍後再試！"});case 19:case"end":return t.stop()}},t,null,[[0,14]])}))()},disabledButtonAlert:function(){c.a.fire({icon:"info",title:"這個按鈕目前沒有功能，請下個月再試！"})},renderAfterFollowToggle:function(t){var e="number"==typeof t?t:t.id;this.recommendedFollowers=this.recommendedFollowers.map(function(t){return t.id===e?Object(s.a)(Object(s.a)({},t),{},{isFollowed:!t.isFollowed}):t})}},computed:Object(s.a)({},Object(u.b)(["currentUser"]))},n=(n("1a13"),n("2877")),u=Object(n.a)(u,function(){var n=this,t=n.$createElement,s=n._self._c||t;return s("div",{staticClass:"container"},[n._m(0),s("hr"),s("div",{staticClass:"users"},[s("ul",{staticClass:"usersList"},[n.isLoading?s("spinner",{staticClass:"spinner"}):n._l(n.recommendedFollowers,function(e){return s("li",{key:e.id,staticClass:"user"},[s("div",{staticClass:"userContent"},[s("div",{staticClass:"avatar"},[s("router-link",{attrs:{to:"/userProfile/"+e.id}},[s("img",{attrs:{src:n._f("emptyImageFilter")(e.avatar),alt:""}})])],1),s("div",{staticClass:"info"},[s("div",{staticClass:"name"},[s("router-link",{attrs:{to:"/userProfile/"+e.id}},[s("h2",[n._v(n._s(e.name))])])],1),s("div",{staticClass:"account"},[s("router-link",{attrs:{to:"/userProfile/"+e.id}},[s("h2",[n._v("@"+n._s(e.account))])])],1)]),s("div",{staticClass:"toggleFollow"},[e.isFollowed?s("button",{staticClass:"btn isFollowing",attrs:{disabled:n.isProcessing},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),n.unfollowUser(e)}}},[n._v(" 正在跟隨 ")]):s("button",{staticClass:"btn",attrs:{disabled:n.isProcessing},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),n.followUser(e)}}},[n._v(" 跟隨 ")])])]),s("hr")])})],2)]),s("div",{staticClass:"showMore"},[s("button",{staticClass:"btn",on:{click:n.fetchRecommendedFollowers}},[n._v("顯示更多")])])])},[function(){var t=this.$createElement,t=this._self._c||t;return t("div",{staticClass:"title"},[t("h1",[this._v("跟隨誰")])])}],!1,null,"233e0f66",null);e.a=u.exports},"999f":function(t,e,n){t.exports=n.p+"img/getNoti.8be5292b.svg"},a1d8:function(t,e){t.exports="data:image/png;base64,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"},a241:function(t,e,n){},a2f2:function(t,e,n){},a5e5:function(t,e,n){},b3eb0:function(t,e,n){},b572:function(t,e,n){"use strict";n("b9a7"),n=n("2877"),n=Object(n.a)({},function(){this.$createElement;return this._self._c,this._m(0)},[function(){var t=this.$createElement,t=this._self._c||t;return t("div",{staticClass:"spinner"},[t("div",{staticClass:"bouncing-loader"},[t("div"),t("div"),t("div")])])}],!1,null,"3ed9f437",null);e.a=n.exports},b6a3:function(t,e,n){},b9a7:function(t,e,n){"use strict";n("b3eb0")},bb31:function(t,e,n){},bb7a:function(t,e,n){"use strict";var s=[function(){var t=this.$createElement,t=this._self._c||t;return t("span",{attrs:{"aria-hidden":"true"}},[t("img",{attrs:{src:n("27ae"),alt:""}})])}],a=n("5530"),r=n("1da1"),d=(n("96cf"),n("a4d3"),n("e01a"),n("b0c0"),n("498a"),n("2fa3")),i=n("2708"),f=n("6783"),o=n("2f62"),c=n("1157"),m=n.n(c),a={name:"CreateTweetModal",props:{user:{type:Object,required:!0}},mixins:[i.a],data:function(){return{tweetContent:"",isProcessing:!1}},methods:{createNewTweet:function(){var l=this;return Object(r.a)(regeneratorRuntime.mark(function t(){var e,n,s,a,r,i,o,c,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(l.contentCheck(l.tweetContent)){t.next=4;break}return l.tweetContent="",t.abrupt("return");case 4:return t.prev=4,l.isProcessing=!0,c={description:l.tweetContent},t.next=9,f.a.createNewTweet(c);case 9:if(i=t.sent,"success"!==(e=i.data).status)throw new Error(e.message);t.next=14;break;case 14:o=e.tweet,n=o.id,s=o.UserId,a=o.createdAt,r=o.description,u=o.updatedAt,c=l.currentUser,i=c.account,o=c.name,c=c.avatar,u={user:{account:i,name:o,avatar:c},id:n,UserId:s,createdAt:a,description:r,updatedAt:u},l.$socket.emit("notification",{userId:s,tweetId:n,tweet:r}),d.a.fire({icon:"success",title:"推文成功！"}),m()("#tweetModal").modal("hide"),l.$bus.$emit("closeModal","#tweetModal"),l.$bus.$emit("afterCreateTweet",u),l.tweetContent="",l.isProcessing=!1,t.next=32;break;case 27:t.prev=27,t.t0=t.catch(4),l.isProcessing=!1,d.a.fire({icon:"error",title:"無法推文，請稍後再試！"});case 32:case"end":return t.stop()}},t,null,[[4,27]])}))()},contentCheck:function(t){t=t.trim();return t?!(140<t.length&&(d.a.fire({icon:"error",title:"推文字數不得超過 140 個字！"}),1)):(d.a.fire({icon:"error",title:"尚未輸入推文內容！"}),!1)},closeModal:function(t){t=document.querySelector("#".concat(t));t.classList.remove("show"),t.setAttribute("aria-hidden","true"),t.setAttribute("style","display: none");t=document.getElementsByClassName("modal-backdrop");document.body.removeChild(t[0])}},computed:Object(a.a)({},Object(o.b)(["currentUser"]))},o=(n("54c2"),n("2877")),s=Object(o.a)(a,function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("div",{staticClass:"modal fade",attrs:{id:"tweetModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[t("button",{staticClass:"start btn",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"},on:{click:function(t){e.tweetContent=""}}},[e._m(0)])]),t("div",{staticClass:"modal-body"},[t("div",{staticClass:"container"},[t("div",{staticClass:"avatar"},[t("img",{attrs:{src:e._f("emptyImageFilter")(e.user.avatar),alt:""}})]),t("div",{staticClass:"textInput"},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.tweetContent,expression:"tweetContent"}],attrs:{name:"",id:"",cols:"80",rows:"5",autofocus:"",maxlength:"140",required:"",placeholder:"有什麼新鮮事？ (字數限制 140 字元)"},domProps:{value:e.tweetContent},on:{input:function(t){t.target.composing||(e.tweetContent=t.target.value)}}})])])]),t("div",{staticClass:"modal-footer"},[t("div",{staticClass:"tweetButton"},[t("button",{staticClass:"btn",attrs:{type:"button",disabled:e.isProcessing},on:{click:e.createNewTweet}},[e._v(" "+e._s(e.isProcessing?"推文中":"推文")+" ")])])])])])])},s,!1,null,"44295052",null);e.a=s.exports},be23:function(t,e,n){"use strict";n("390e")},c8e4:function(t,e,n){"use strict";var s=[function(){var t=this.$createElement,t=this._self._c||t;return t("div",{staticClass:"icon"},[t("img",{attrs:{src:n("977e"),alt:""}})])}],a=n("5530"),r=(n("b0c0"),n("ac1f"),n("1276"),n("2f62")),i=n("bb7a"),o=n("1157"),c=n.n(o),a={name:"UserSidebar",components:{CreateTweetModal:i.a},data:function(){return{noti:[],main:!1,notification:!1,publicMessage:!1,privateMessage:!1,profile:!1,accountEdit:!1,location:" "}},sockets:{connection:function(t){},notification:function(t){this.noti.push(t.id),t&&!this.notification&&this.$socket.emit("tweet",{id:t.id,account:t.account,name:t.name,UserId:t.id,avatar:t.avatar,tweetId:t.tweetId,tweet:t.tweet,replyId:t.replyId,reply:t.reply},this.currentUser.id)}},created:function(){var e=this;this.$bus.$on("closeModal",function(t){e.closeModal(t)});var t=this.$route.path.split("/")[1];this.setCurrentLocation(t)},methods:{logout:function(){this.$store.commit("revokeAuthentication"),this.$router.push("/signin"),sessionStorage.clear()},showModal:function(){c()("#tweetModal").modal("show")},closeModal:function(t){c()(t).modal("hide"),c()(".modal-backdrop").hide()},setCurrentLocation:function(t){switch(t){case"main":this.main=!0;break;case"notification":this.notification=!0;break;case"publicMessage":this.publicMessage=!0;break;case"privateMessage":this.privateMessage=!0;break;case"profile":this.profile=!0;break;case"accountEdit":this.accountEdit=!0}}},computed:Object(a.a)({},Object(r.b)(["currentUser"]))},r=(n("cb0b"),n("2877")),s=Object(r.a)(a,function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("div",{staticClass:"userSidebar"},[t("div",{staticClass:"logo"},[t("router-link",{attrs:{to:"/main"}},[t("img",{attrs:{src:n("a1d8"),alt:""}})])],1),t("div",{staticClass:"buttonList"},[t("div",{staticClass:"navItem index"},["main"===e.location?t("div",{staticClass:"icon"},[t("img",{attrs:{src:n("459f"),alt:""}})]):t("div",{staticClass:"icon"},[t("img",{attrs:{src:n("10d1"),alt:""}})]),t("button",{staticClass:"btn"},[t("router-link",{attrs:{to:"/main"}},["main"===e.location?t("p",{staticClass:"located",attrs:{id:"routerMain"}},[e._v(" 首頁 ")]):t("p",{attrs:{id:"routerMain"}},[e._v("首頁")])])],1)]),t("div",{staticClass:"navItem notification"},[t("div",{staticClass:"icon"},[0<this.noti.length?t("img",{attrs:{src:n("999f"),alt:""}}):e.notification?t("img",{attrs:{src:n("341c"),alt:""}}):t("img",{attrs:{src:n("5758"),alt:""}})]),t("button",{staticClass:"btn"},[t("router-link",{attrs:{to:"/notification"}},["notification"===e.location?t("p",{staticClass:"located",attrs:{id:"routerNotification"}},[e._v(" 通知 ")]):t("p",{attrs:{id:"routerNotification"}},[e._v("通知")])])],1)]),t("div",{staticClass:"navItem userProfile"},[(e.location,t("div",{staticClass:"icon"},[t("i",{staticClass:"far fa-envelope tempIcon"})])),t("button",{staticClass:"btn"},[t("router-link",{attrs:{to:"/publicMessage"}},["publicMessage"===e.location?t("p",{staticClass:"located",attrs:{id:"routerPublicMessage"}},[e._v(" 公開聊天室 ")]):t("p",{attrs:{id:"routerPublicMessage"}},[e._v("公開聊天室")])])],1)]),t("div",{staticClass:"navItem userProfile"},[(e.location,t("div",{staticClass:"icon"},[t("i",{staticClass:"far fa-envelope tempIcon"})])),t("button",{staticClass:"btn"},[t("router-link",{attrs:{to:"/privateMessage"}},["privateMessage"===e.location?t("p",{staticClass:"located",attrs:{id:"routerPrivateMessage"}},[e._v(" 私人訊息 ")]):t("p",{attrs:{id:"routerPrivateMessage"}},[e._v("私人訊息")])])],1)]),t("div",{staticClass:"navItem userProfile"},["userProfile"===e.location?t("div",{staticClass:"icon"},[t("img",{attrs:{src:n("fc4c"),alt:""}})]):t("div",{staticClass:"icon"},[t("img",{attrs:{src:n("4c9a"),alt:""}})]),t("button",{staticClass:"btn"},[t("router-link",{attrs:{to:{name:"user-profile",params:{id:e.currentUser.id}}}},["userProfile"===e.location?t("p",{staticClass:"located",attrs:{id:"routerProfile"}},[e._v(" 個人資料 ")]):t("p",{attrs:{id:"routerProfile"}},[e._v("個人資料")])])],1)]),t("div",{staticClass:"navItem setting"},["accountEdit"===e.location?t("div",{staticClass:"icon"},[t("img",{attrs:{src:n("85f5"),alt:""}})]):t("div",{staticClass:"icon"},[t("img",{attrs:{src:n("6d80"),alt:""}})]),t("button",{staticClass:"btn"},[t("router-link",{attrs:{to:"/accountEdit"}},["accountEdit"===e.location?t("p",{staticClass:"located",attrs:{id:"routerSetting"}},[e._v(" 設定 ")]):t("p",{attrs:{id:"routerSetting"}},[e._v("設定")])])],1)]),t("div",{staticClass:"navItem newTweet"},[t("button",{staticClass:"btn",on:{click:e.showModal}},[t("p",[e._v("推文")])]),t("CreateTweetModal",{attrs:{user:e.currentUser}})],1),t("div",{staticClass:"navItem logout"},[e._m(0),t("button",{staticClass:"btn",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.logout(t)}}},[t("p",[e._v("登出")])])])])])},s,!1,null,"b74b053a",null);e.a=s.exports},cb0b:function(t,e,n){"use strict";n("b6a3")},d2b8:function(t,e,n){"use strict";n("d887")},d855:function(t,e,n){},d887:function(t,e,n){},da7c:function(t,e,n){"use strict";var s=n("5530"),r=n("1da1"),a=(n("a4d3"),n("e01a"),n("99af"),n("96cf"),function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("div",{staticClass:"modal fade",attrs:{id:"putTweetModal-"+e.tweet.id,tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[t("button",{staticClass:"start btn",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"},on:{click:e.clearTweetContent}},[e._m(0)])]),t("div",{staticClass:"modal-body"},[t("div",{staticClass:"container replyTarget"},[t("div",{staticClass:"avatar"},[e.tweet.user?t("img",{attrs:{src:e.tweet.user.avatar,alt:""}}):t("img",{attrs:{src:e._f("emptyImageFilter")(""),alt:""}})]),t("div",{staticClass:"tweetInfo"},[t("div",{staticClass:"tweetContent"},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.tweetContent,expression:"tweetContent"}],attrs:{name:"tweetContent",id:"tweetContent",cols:"60",rows:"10"},domProps:{value:e.tweetContent},on:{input:function(t){t.target.composing||(e.tweetContent=t.target.value)}}})])])])]),t("div",{staticClass:"modal-footer"},[t("div",{staticClass:"tweetButton"},[t("button",{staticClass:"btn",attrs:{type:"button",disabled:e.isProcessing},on:{click:function(t){return e.createReply(e.tweet.id)}}},[e._v(" "+e._s(e.isProcessing?"更新中..":"更新")+" ")])])])])])])}),i=[function(){var t=this.$createElement,t=this._self._c||t;return t("span",{attrs:{"aria-hidden":"true"}},[t("img",{attrs:{src:n("27ae"),alt:""}})])}],o=n("2fa3"),c=n("2708"),u=n("2f62"),l=n("6783"),d=n("1157"),f=n.n(d),m={name:"PutTweetModal",mixins:[c.a],props:{tweet:{type:Object,default:function(){return{user:{avatar:"",name:"",account:""}}}}},data:function(){return{tweetContent:"",isProcessing:!1}},created:function(){this.tweetContent=this.tweet.description},methods:{clearTweetContent:function(){this.tweetContent=this.tweet.description},createReply:function(n){var s=this;return Object(r.a)(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s.tweetContentCheck(s.tweetContent)){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,s.isProcessing=!0,e=s.tweetContent,t.next=8,l.a.putTweet(n,e);case 8:if(e=t.sent,"success"!==(e=e.data).status)throw new Error(e.message);t.next=12;break;case 12:o.a.fire({icon:"success",title:"推文更新成功！"}),f()("#putTweetModal-".concat(n)).modal("hide"),s.$emit("afterPutTweet",s.tweetContent),s.clearTweetContent(),s.isProcessing=!1,t.next=24;break;case 19:t.prev=19,t.t0=t.catch(3),s.isProcessing=!1,o.a.fire({icon:"error",title:"無法更新推文，請稍後再試！"});case 24:case"end":return t.stop()}},t,null,[[3,19]])}))()},tweetContentCheck:function(t){return t?!(140<t.length&&(o.a.fire({icon:"error",title:"推文字數不得超過 140 個字！"}),1)):(o.a.fire({icon:"error",title:"尚未輸入推文內容！"}),!1)}},computed:Object(s.a)({},Object(u.b)(["currentUser"]))},d=(n("4937"),n("2877")),a=Object(d.a)(m,a,i,!1,null,"6525e1bb",null).exports,i=n("141a"),u={name:"TweetItem",mixins:[c.c,c.a],components:{TweetReplyModal:i.a,PutTweetModal:a},props:{tweet:{type:Object,required:!0}},data:function(){return{localTweet:{},isMine:!1}},created:function(){var e=this;this.localTweet=this.tweet,this.$bus.$on("afterCreateReply",function(t){e.afterCreateReply(t)})},methods:{toggleLike:function(s){var a=this;return Object(r.a)(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e={},s.isLiked)return s.isLiked=!1,--s.likeCount,t.next=7,l.a.unlikeTweet(s.id);t.next=10;break;case 7:e=t.sent,t.next=17;break;case 10:return s.isLiked=!0,s.likeCount+=1,t.next=14,l.a.likeTweet(s.id);case 14:e=t.sent,n=a.$route.params.id,a.$socket.emit("like",{userId:n,currentUserId:a.currentUser.id});case 17:if("success"!==e.data.status)throw new Error(e.data.message);t.next=19;break;case 19:o.a.fire({icon:"success",title:"操作成功！"}),a.$emit("afterToggleLike",s),t.next=27;break;case 23:t.prev=23,t.t0=t.catch(0),o.a.fire({icon:"error",title:"無法執行此操作，請稍後再試！"});case 27:case"end":return t.stop()}},t,null,[[0,23]])}))()},afterCreateReply:function(t){this.localTweet.id===t.tweetId&&this.tweet.replyCount++},afterPutTweet:function(t){this.localTweet.description=t},deleteTweet:function(n){var s=this;return Object(r.a)(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.a.deleteTweet(n);case 3:if(e=t.sent,"success"!==e.data.status)throw new Error;t.next=8;break;case 8:s.$emit("afterDeleteTweet",n),o.a.fire({icon:"success",title:"成功刪除推文！"}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),o.a.fire({icon:"error",title:"API尚未建立，請下個月再試！"});case 15:case"end":return t.stop()}},t,null,[[0,12]])}))()},showModal:function(t,e){var n="reply"===t?"#tweetReplyModal":"#putTweetModal";f()("".concat(n,"-").concat(e)).modal("show"),f()("".concat(n,"-").concat(e)).appendTo("body")}},computed:Object(s.a)({},Object(u.b)(["currentUser"])),watch:{tweet:{handler:function(){this.localTweet=this.tweet},deep:!0}}},u=(n("ebd4"),Object(d.a)(u,function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("div",{staticClass:"tweet"},[t("div",{staticClass:"avatar"},[t("router-link",{attrs:{to:{name:"user-profile",params:{id:e.localTweet.UserId}}}},[e.localTweet.user?t("img",{attrs:{src:e.localTweet.user.avatar,alt:""}}):t("img",{attrs:{src:e._f("emptyImageFilter")(""),alt:""}})])],1),t("div",{staticClass:"tweetInfo"},[t("div",{staticClass:"userInfo"},[t("router-link",{attrs:{to:{name:"user-profile",params:{id:e.localTweet.UserId}}}},[t("p",{staticClass:"userName mr-1"},[e._v(" "+e._s(e.localTweet.user?e.localTweet.user.name:"UserName")+" ")])]),t("p",{staticClass:"userAccount"},[e._v(" @"+e._s(e.localTweet.user?e.localTweet.user.account:"UserAccount")+" ")]),t("span",{staticClass:"mx-1"},[e._v("·")]),t("p",{staticClass:"tweetUpdateAt"},[e._v(e._s(e._f("fromNow")(e.localTweet.createdAt)))]),e.currentUser.id===e.localTweet.UserId?t("div",{staticClass:"edit-panel"},[t("button",{staticClass:"btn edit",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.showModal("edit",e.localTweet.id)}}},[t("i",{staticClass:"fas fa-pen"})]),t("button",{staticClass:"btn deleteTweet",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.deleteTweet(e.localTweet.id)}}},[t("i",{staticClass:"fas fa-times"})])]):e._e()],1),t("div",{staticClass:"tweetContent"},[t("router-link",{attrs:{to:"/replydetail/"+e.localTweet.id}},[t("p",[e._v(e._s(e.localTweet.description))])])],1),t("div",{staticClass:"tweetPanel"},[t("div",{staticClass:"comments"},[t("img",{attrs:{src:n("6569"),alt:""},on:{click:function(t){return e.showModal("reply",e.localTweet.id)}}}),t("p",[e._v(" "+e._s(e.localTweet.replyCount)+" ")])]),t("div",{staticClass:"likes"},[e.localTweet.isLiked?t("img",{attrs:{src:n("1881"),alt:""},on:{click:function(t){return e.toggleLike(e.localTweet)}}}):t("img",{class:{liked:e.localTweet.isLiked},attrs:{src:n("6adc"),alt:""},on:{click:function(t){return e.toggleLike(e.localTweet)}}}),t("p",[e._v(" "+e._s(e.localTweet.likeCount)+" ")])])])]),t("PutTweetModal",{attrs:{tweet:e.localTweet},on:{afterPutTweet:e.afterPutTweet}}),t("TweetReplyModal",{attrs:{tweet:e.localTweet}})],1)},[],!1,null,"0bae2d59",null));e.a=u.exports},e409:function(t,e,n){"use strict";n("89b5")},ebd4:function(t,e,n){"use strict";n("d855")},fc4c:function(t,e,n){t.exports=n.p+"img/atProfile.008313ab.svg"}});