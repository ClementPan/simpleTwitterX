(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-9b8d9a98"],{"11f5":function(e,t,r){"use strict";r("c637")},"4a39":function(e,t,r){"use strict";r.r(t);var a,n=r("5530"),s=r("1da1"),c=(r("d81d"),r("96cf"),r("c8e4")),i=r("7950"),u=r("92e8"),o=(r("b0c0"),r("da7c")),f=r("2f62"),d=r("2fa3"),l=r("6783"),p={name:"UserProfileTweetsList",components:{TweetItem:o.a},props:{userData:{type:Object,required:!0}},created:function(){var t=this;this.$bus.$on("afterCreateTweet",function(e){t.afterCreateTweet(e)})},data:function(){return{user:{},tweet:{UserId:void 0,created:"",description:"",id:void 0,likeCount:0,replyCount:0,updatedAt:"",user:{account:"",name:"",avatar:""},isLiked:!1},tweets:{},isLoading:!0}},methods:{setUser:function(e){this.user=e},fetchUserTweets:function(r){var a=this;return Object(s.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.isLoading=!0,e.next=4,l.a.getUserTweet(r);case 4:t=e.sent,t=t.data,a.tweets=t.map(function(e){return Object(n.a)(Object(n.a)({},e),{},{UserId:a.user.id,user:{account:a.user.account,avatar:a.user.avatar,name:a.user.name}})}),a.isLoading=!1,e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),d.a.fire({icon:"error",title:"無法取得推文，請稍後再試！"});case 14:case"end":return e.stop()}},e,null,[[0,10]])}))()},afterCreateTweet:function(e){this.tweets.unshift(Object(n.a)(Object(n.a)({},this.tweet),e))}},computed:Object(n.a)({},Object(f.b)(["currentUser"])),watch:{userData:{handler:(a=Object(s.a)(regeneratorRuntime.mark(function e(t,r){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r.id===t.id)return e.abrupt("return");e.next=2;break;case 2:return e.prev=2,this.setUser(t),a=this.user.id,e.next=7,this.fetchUserTweets(a);case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),d.a.fire({icon:"error",title:"無法取得推文資料，請稍後再試！"});case 13:case"end":return e.stop()}},e,this,[[2,9]])})),function(e,t){return a.apply(this,arguments)}),deep:!0}}},b=(r("11f5"),r("2877")),o=Object(b.a)(p,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("ul",{staticClass:"tweetList"},[e.isLoading?[r("p",{staticClass:"loading"},[e._v("資料讀取中...")])]:[e.tweets.length?e._l(e.tweets,function(e){return r("TweetItem",{key:e.id,attrs:{tweet:e}})}):r("p",{staticClass:"noData"},[e._v("無資料")])]],2)])},[],!1,null,"3f36b8ac",null).exports,p=r("999e"),h=r("4cce"),f={name:"UserProfile",components:{UserSidebar:c.a,UserProfileCard:i.a,UserProfileNavtabs:u.a,UserProfileTweetsList:o,RecommendedFollowers:p.a},beforeRouteEnter:function(r,e,t){return Object(s.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{t(function(e){var t=r.params.id;e.fetchUser(t),e.fetchingData=!0})}catch(e){}case 1:case"end":return e.stop()}},e)}))()},beforeRouteUpdate:function(r,e,a){var n=this;return Object(s.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n.fetchingData&&a(),t=r.params.id,e.next=5,n.fetchUser(t);case 5:a(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0);case 11:case"end":return e.stop()}},e,null,[[0,8]])}))()},data:function(){return{user:{},tweets:[],fetchingData:!1}},methods:{fetchUser:function(r){var a=this;return Object(s.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.getUser(r);case 3:t=e.sent,t=t.data,a.user=t,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),d.a.fire({icon:"error",title:"無法取得使用者資訊，請稍後再試！"});case 12:case"end":return e.stop()}},e,null,[[0,8]])}))()},afterToggleLike:function(t){this.tweets=this.tweets.map(function(e){return e.id===t.id?Object(n.a)(Object(n.a)({},e),{},{isLiked:t.isLiked}):e})}},computed:Object(n.a)({},Object(f.b)(["currentUser"]))},f=(r("d674"),Object(b.a)(f,function(){var t=this,e=t.$createElement,e=t._self._c||e;return e("div",{attrs:{id:"userProfile"}},[e("UserSidebar"),e("div",{staticClass:"mainSection"},[e("div",{staticClass:"title stickyTitle"},[e("button",{staticClass:"btn",on:{click:function(e){return t.$router.back()}}},[e("img",{attrs:{src:r("b66c"),alt:""}})]),e("div",{staticClass:"nameTag"},[e("p",[t._v(t._s(t.user.name))]),e("p",[t._v(t._s(t.user.tweetCount)+" 則推文")])])]),e("div",{staticClass:"admin-users-card"},[e("UserProfileCard",{attrs:{userData:t.user}}),e("UserProfileNavtabs",{attrs:{userData:t.user}}),e("UserProfileTweetsList",{attrs:{userData:t.user}})],1)]),e("RecommendedFollowers")],1)},[],!1,null,"d9db4012",null));t.default=f.exports},aadf:function(e,t,r){},c637:function(e,t,r){},d674:function(e,t,r){"use strict";r("aadf")}}]);